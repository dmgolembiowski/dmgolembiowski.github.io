<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<title>:mod:`optparse` --- Parser for command line options</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7952 2016-07-26 18:15:59Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

.subscript {
  vertical-align: sub;
  font-size: smaller }

.superscript {
  vertical-align: super;
  font-size: smaller }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left, table.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right, table.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

table.align-center {
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

.align-top    {
  vertical-align: top }

.align-middle {
  vertical-align: middle }

.align-bottom {
  vertical-align: bottom }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: grey; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

/* "booktabs" style (no vertical lines) */
table.docutils.booktabs {
  border: 0px;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.docutils.booktabs * {
  border: 0px;
}
table.docutils.booktabs th {
  border-bottom: thin solid;
  text-align: left;
}

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="mod-optparse-parser-for-command-line-options">
<h1 class="title"><a href="#id1"><span class="problematic" id="id2">:mod:`optparse`</span></a> --- Parser for command line options</h1>

<div class="system-message" id="id1">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1); <em><a href="#id2">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 4)</p>
<p>Unknown directive type &quot;module&quot;.</p>
<pre class="literal-block">
.. module:: optparse
   :synopsis: Command-line option parsing library.
   :deprecated:

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 8)</p>
<p>Unknown directive type &quot;moduleauthor&quot;.</p>
<pre class="literal-block">
.. moduleauthor:: Greg Ward &lt;gward&#64;python.net&gt;
</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 9)</p>
<p>Unknown directive type &quot;sectionauthor&quot;.</p>
<pre class="literal-block">
.. sectionauthor:: Greg Ward &lt;gward&#64;python.net&gt;

</pre>
</div>
<p><strong>Source code:</strong> <a href="#id3"><span class="problematic" id="id4">:source:`Lib/optparse.py`</span></a></p>
<div class="system-message" id="id3">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 11); <em><a href="#id4">backlink</a></em></p>
Unknown interpreted text role &quot;source&quot;.</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 13)</p>
<p>Unknown directive type &quot;deprecated&quot;.</p>
<pre class="literal-block">
.. deprecated:: 3.2
   The :mod:`optparse` module is deprecated and will not be developed further;
   development will continue with the :mod:`argparse` module.

</pre>
</div>
<hr class="docutils" />
<p><a href="#id5"><span class="problematic" id="id6">:mod:`optparse`</span></a> is a more convenient, flexible, and powerful library for parsing
command-line options than the old <a href="#id7"><span class="problematic" id="id8">:mod:`getopt`</span></a> module.  <a href="#id9"><span class="problematic" id="id10">:mod:`optparse`</span></a> uses a
more declarative style of command-line parsing: you create an instance of
<a href="#id11"><span class="problematic" id="id12">:class:`OptionParser`</span></a>, populate it with options, and parse the command
line. <a href="#id13"><span class="problematic" id="id14">:mod:`optparse`</span></a> allows users to specify options in the conventional
GNU/POSIX syntax, and additionally generates usage and help messages for you.</p>
<div class="system-message" id="id5">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 19); <em><a href="#id6">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id7">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 19); <em><a href="#id8">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id9">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 19); <em><a href="#id10">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id11">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 19); <em><a href="#id12">backlink</a></em></p>
Unknown interpreted text role &quot;class&quot;.</div>
<div class="system-message" id="id13">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 19); <em><a href="#id14">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<p>Here's an example of using <a href="#id15"><span class="problematic" id="id16">:mod:`optparse`</span></a> in a simple script:</p>
<div class="system-message" id="id15">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 26); <em><a href="#id16">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<pre class="literal-block">
from optparse import OptionParser
...
parser = OptionParser()
parser.add_option(&quot;-f&quot;, &quot;--file&quot;, dest=&quot;filename&quot;,
                  help=&quot;write report to FILE&quot;, metavar=&quot;FILE&quot;)
parser.add_option(&quot;-q&quot;, &quot;--quiet&quot;,
                  action=&quot;store_false&quot;, dest=&quot;verbose&quot;, default=True,
                  help=&quot;don't print status messages to stdout&quot;)

(options, args) = parser.parse_args()
</pre>
<p>With these few lines of code, users of your script can now do the &quot;usual thing&quot;
on the command-line, for example:</p>
<pre class="literal-block">
&lt;yourscript&gt; --file=outfile -q
</pre>
<p>As it parses the command line, <a href="#id17"><span class="problematic" id="id18">:mod:`optparse`</span></a> sets attributes of the
<tt class="docutils literal">options</tt> object returned by <a href="#id19"><span class="problematic" id="id20">:meth:`parse_args`</span></a> based on user-supplied
command-line values.  When <a href="#id21"><span class="problematic" id="id22">:meth:`parse_args`</span></a> returns from parsing this command
line, <tt class="docutils literal">options.filename</tt> will be <tt class="docutils literal">&quot;outfile&quot;</tt> and <tt class="docutils literal">options.verbose</tt> will be
<tt class="docutils literal">False</tt>.  <a href="#id23"><span class="problematic" id="id24">:mod:`optparse`</span></a> supports both long and short options, allows short
options to be merged together, and allows options to be associated with their
arguments in a variety of ways.  Thus, the following command lines are all
equivalent to the above example:</p>
<div class="system-message" id="id17">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 44); <em><a href="#id18">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id19">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 44); <em><a href="#id20">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<div class="system-message" id="id21">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 44); <em><a href="#id22">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<div class="system-message" id="id23">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 44); <em><a href="#id24">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<pre class="literal-block">
&lt;yourscript&gt; -f outfile --quiet
&lt;yourscript&gt; --quiet --file outfile
&lt;yourscript&gt; -q -foutfile
&lt;yourscript&gt; -qfoutfile
</pre>
<p>Additionally, users can run one of the following</p>
<pre class="literal-block">
&lt;yourscript&gt; -h
&lt;yourscript&gt; --help
</pre>
<p>and <a href="#id25"><span class="problematic" id="id26">:mod:`optparse`</span></a> will print out a brief summary of your script's options:</p>
<div class="system-message" id="id25">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 63); <em><a href="#id26">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<pre class="code text literal-block">
Usage: &lt;yourscript&gt; [options]

Options:
  -h, --help            show this help message and exit
  -f FILE, --file=FILE  write report to FILE
  -q, --quiet           don't print status messages to stdout
</pre>
<p>where the value of <em>yourscript</em> is determined at runtime (normally from
<tt class="docutils literal">sys.argv[0]</tt>).</p>
<div class="section" id="background">
<span id="optparse-background"></span><h1>Background</h1>
<p><a href="#id27"><span class="problematic" id="id28">:mod:`optparse`</span></a> was explicitly designed to encourage the creation of programs
with straightforward, conventional command-line interfaces.  To that end, it
supports only the most common command-line syntax and semantics conventionally
used under Unix.  If you are unfamiliar with these conventions, read this
section to acquaint yourself with them.</p>
<div class="system-message" id="id27">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 83); <em><a href="#id28">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="section" id="terminology">
<span id="optparse-terminology"></span><h2>Terminology</h2>
<dl class="docutils">
<dt>argument</dt>
<dd><p class="first">a string entered on the command-line, and passed by the shell to <tt class="docutils literal">execl()</tt>
or <tt class="docutils literal">execv()</tt>.  In Python, arguments are elements of <tt class="docutils literal">sys.argv[1:]</tt>
(<tt class="docutils literal">sys.argv[0]</tt> is the name of the program being executed).  Unix shells
also use the term &quot;word&quot;.</p>
<p class="last">It is occasionally desirable to substitute an argument list other than
<tt class="docutils literal">sys.argv[1:]</tt>, so you should read &quot;argument&quot; as &quot;an element of
<tt class="docutils literal">sys.argv[1:]</tt>, or of some other list provided as a substitute for
<tt class="docutils literal">sys.argv[1:]</tt>&quot;.</p>
</dd>
<dt>option</dt>
<dd><p class="first">an argument used to supply extra information to guide or customize the
execution of a program.  There are many different syntaxes for options; the
traditional Unix syntax is a hyphen (&quot;-&quot;) followed by a single letter,
e.g. <tt class="docutils literal"><span class="pre">-x</span></tt> or <tt class="docutils literal"><span class="pre">-F</span></tt>.  Also, traditional Unix syntax allows multiple
options to be merged into a single argument, e.g. <tt class="docutils literal"><span class="pre">-x</span> <span class="pre">-F</span></tt> is equivalent
to <tt class="docutils literal"><span class="pre">-xF</span></tt>.  The GNU project introduced <tt class="docutils literal"><span class="pre">--</span></tt> followed by a series of
hyphen-separated words, e.g. <tt class="docutils literal"><span class="pre">--file</span></tt> or <tt class="docutils literal"><span class="pre">--dry-run</span></tt>.  These are the
only two option syntaxes provided by <a href="#id29"><span class="problematic" id="id30">:mod:`optparse`</span></a>.</p>
<div class="system-message" id="id29">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 107); <em><a href="#id30">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<p>Some other option syntaxes that the world has seen include:</p>
<ul class="simple">
<li>a hyphen followed by a few letters, e.g. <tt class="docutils literal"><span class="pre">-pf</span></tt> (this is <em>not</em> the same
as multiple options merged into a single argument)</li>
<li>a hyphen followed by a whole word, e.g. <tt class="docutils literal"><span class="pre">-file</span></tt> (this is technically
equivalent to the previous syntax, but they aren't usually seen in the same
program)</li>
<li>a plus sign followed by a single letter, or a few letters, or a word, e.g.
<tt class="docutils literal">+f</tt>, <tt class="docutils literal">+rgb</tt></li>
<li>a slash followed by a letter, or a few letters, or a word, e.g. <tt class="docutils literal">/f</tt>,
<tt class="docutils literal">/file</tt></li>
</ul>
<p>These option syntaxes are not supported by <a href="#id31"><span class="problematic" id="id32">:mod:`optparse`</span></a>, and they never
will be.  This is deliberate: the first three are non-standard on any
environment, and the last only makes sense if you're exclusively targeting
VMS, MS-DOS, and/or Windows.</p>
<div class="last system-message" id="id31">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 131); <em><a href="#id32">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
</dd>
<dt>option argument</dt>
<dd><p class="first">an argument that follows an option, is closely associated with that option,
and is consumed from the argument list when that option is. With
<a href="#id33"><span class="problematic" id="id34">:mod:`optparse`</span></a>, option arguments may either be in a separate argument from
their option:</p>
<div class="system-message" id="id33">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 137); <em><a href="#id34">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<pre class="code text literal-block">
-f foo
--file foo
</pre>
<p>or included in the same argument:</p>
<pre class="code text literal-block">
-ffoo
--file=foo
</pre>
<p>Typically, a given option either takes an argument or it doesn't. Lots of
people want an &quot;optional option arguments&quot; feature, meaning that some options
will take an argument if they see it, and won't if they don't.  This is
somewhat controversial, because it makes parsing ambiguous: if <tt class="docutils literal"><span class="pre">-a</span></tt> takes
an optional argument and <tt class="docutils literal"><span class="pre">-b</span></tt> is another option entirely, how do we
interpret <tt class="docutils literal"><span class="pre">-ab</span></tt>?  Because of this ambiguity, <a href="#id35"><span class="problematic" id="id36">:mod:`optparse`</span></a> does not
support this feature.</p>
<div class="last system-message" id="id35">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 154); <em><a href="#id36">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
</dd>
<dt>positional argument</dt>
<dd>something leftover in the argument list after options have been parsed, i.e.
after options and their arguments have been parsed and removed from the
argument list.</dd>
<dt>required option</dt>
<dd><p class="first">an option that must be supplied on the command-line; note that the phrase
&quot;required option&quot; is self-contradictory in English.  <a href="#id37"><span class="problematic" id="id38">:mod:`optparse`</span></a> doesn't
prevent you from implementing required options, but doesn't give you much
help at it either.</p>
<div class="last system-message" id="id37">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 168); <em><a href="#id38">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
</dd>
</dl>
<p>For example, consider this hypothetical command-line:</p>
<pre class="literal-block">
prog -v --report report.txt foo bar
</pre>
<p><tt class="docutils literal"><span class="pre">-v</span></tt> and <tt class="docutils literal"><span class="pre">--report</span></tt> are both options.  Assuming that <tt class="docutils literal"><span class="pre">--report</span></tt>
takes one argument, <tt class="docutils literal">report.txt</tt> is an option argument.  <tt class="docutils literal">foo</tt> and
<tt class="docutils literal">bar</tt> are positional arguments.</p>
</div>
<div class="section" id="what-are-options-for">
<span id="optparse-what-options-for"></span><h2>What are options for?</h2>
<p>Options are used to provide extra information to tune or customize the execution
of a program.  In case it wasn't clear, options are usually <em>optional</em>.  A
program should be able to run just fine with no options whatsoever.  (Pick a
random program from the Unix or GNU toolsets.  Can it run without any options at
all and still make sense?  The main exceptions are <tt class="docutils literal">find</tt>, <tt class="docutils literal">tar</tt>, and
<tt class="docutils literal">dd</tt>---all of which are mutant oddballs that have been rightly criticized
for their non-standard syntax and confusing interfaces.)</p>
<p>Lots of people want their programs to have &quot;required options&quot;.  Think about it.
If it's required, then it's <em>not optional</em>!  If there is a piece of information
that your program absolutely requires in order to run successfully, that's what
positional arguments are for.</p>
<p>As an example of good command-line interface design, consider the humble <tt class="docutils literal">cp</tt>
utility, for copying files.  It doesn't make much sense to try to copy files
without supplying a destination and at least one source. Hence, <tt class="docutils literal">cp</tt> fails if
you run it with no arguments.  However, it has a flexible, useful syntax that
does not require any options at all:</p>
<pre class="literal-block">
cp SOURCE DEST
cp SOURCE ... DEST-DIR
</pre>
<p>You can get pretty far with just that.  Most <tt class="docutils literal">cp</tt> implementations provide a
bunch of options to tweak exactly how the files are copied: you can preserve
mode and modification time, avoid following symlinks, ask before clobbering
existing files, etc.  But none of this distracts from the core mission of
<tt class="docutils literal">cp</tt>, which is to copy either one file to another, or several files to another
directory.</p>
</div>
<div class="section" id="what-are-positional-arguments-for">
<span id="optparse-what-positional-arguments-for"></span><h2>What are positional arguments for?</h2>
<p>Positional arguments are for those pieces of information that your program
absolutely, positively requires to run.</p>
<p>A good user interface should have as few absolute requirements as possible.  If
your program requires 17 distinct pieces of information in order to run
successfully, it doesn't much matter <em>how</em> you get that information from the
user---most people will give up and walk away before they successfully run the
program.  This applies whether the user interface is a command-line, a
configuration file, or a GUI: if you make that many demands on your users, most
of them will simply give up.</p>
<p>In short, try to minimize the amount of information that users are absolutely
required to supply---use sensible defaults whenever possible.  Of course, you
also want to make your programs reasonably flexible.  That's what options are
for.  Again, it doesn't matter if they are entries in a config file, widgets in
the &quot;Preferences&quot; dialog of a GUI, or command-line options---the more options
you implement, the more flexible your program is, and the more complicated its
implementation becomes.  Too much flexibility has drawbacks as well, of course;
too many options can overwhelm users and make your code much harder to maintain.</p>
</div>
</div>
<div class="section" id="tutorial">
<span id="optparse-tutorial"></span><h1>Tutorial</h1>
<p>While <a href="#id39"><span class="problematic" id="id40">:mod:`optparse`</span></a> is quite flexible and powerful, it's also straightforward
to use in most cases.  This section covers the code patterns that are common to
any <a href="#id41"><span class="problematic" id="id42">:mod:`optparse`</span></a>-based program.</p>
<div class="system-message" id="id39">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 248); <em><a href="#id40">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id41">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 248); <em><a href="#id42">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<p>First, you need to import the OptionParser class; then, early in the main
program, create an OptionParser instance:</p>
<pre class="literal-block">
from optparse import OptionParser
...
parser = OptionParser()
</pre>
<p>Then you can start defining options.  The basic syntax is:</p>
<pre class="literal-block">
parser.add_option(opt_str, ...,
                  attr=value, ...)
</pre>
<p>Each option has one or more option strings, such as <tt class="docutils literal"><span class="pre">-f</span></tt> or <tt class="docutils literal"><span class="pre">--file</span></tt>,
and several option attributes that tell <a href="#id43"><span class="problematic" id="id44">:mod:`optparse`</span></a> what to expect and what
to do when it encounters that option on the command line.</p>
<div class="system-message" id="id43">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 264); <em><a href="#id44">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<p>Typically, each option will have one short option string and one long option
string, e.g.:</p>
<pre class="literal-block">
parser.add_option(&quot;-f&quot;, &quot;--file&quot;, ...)
</pre>
<p>You're free to define as many short option strings and as many long option
strings as you like (including zero), as long as there is at least one option
string overall.</p>
<p>The option strings passed to <a href="#id45"><span class="problematic" id="id46">:meth:`OptionParser.add_option`</span></a> are effectively
labels for the
option defined by that call.  For brevity, we will frequently refer to
<em>encountering an option</em> on the command line; in reality, <a href="#id47"><span class="problematic" id="id48">:mod:`optparse`</span></a>
encounters <em>option strings</em> and looks up options from them.</p>
<div class="system-message" id="id45">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 277); <em><a href="#id46">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<div class="system-message" id="id47">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 277); <em><a href="#id48">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<p>Once all of your options are defined, instruct <a href="#id49"><span class="problematic" id="id50">:mod:`optparse`</span></a> to parse your
program's command line:</p>
<div class="system-message" id="id49">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 283); <em><a href="#id50">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<pre class="literal-block">
(options, args) = parser.parse_args()
</pre>
<p>(If you like, you can pass a custom argument list to <a href="#id51"><span class="problematic" id="id52">:meth:`parse_args`</span></a>, but
that's rarely necessary: by default it uses <tt class="docutils literal">sys.argv[1:]</tt>.)</p>
<div class="system-message" id="id51">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 288); <em><a href="#id52">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<p><a href="#id53"><span class="problematic" id="id54">:meth:`parse_args`</span></a> returns two values:</p>
<div class="system-message" id="id53">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 291); <em><a href="#id54">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<ul class="simple">
<li><tt class="docutils literal">options</tt>, an object containing values for all of your options---e.g. if
<tt class="docutils literal"><span class="pre">--file</span></tt> takes a single string argument, then <tt class="docutils literal">options.file</tt> will be the
filename supplied by the user, or <tt class="docutils literal">None</tt> if the user did not supply that
option</li>
<li><tt class="docutils literal">args</tt>, the list of positional arguments leftover after parsing options</li>
</ul>
<p>This tutorial section only covers the four most important option attributes:
<a href="#id55"><span class="problematic" id="id56">:attr:`~Option.action`</span></a>, <a href="#id57"><span class="problematic" id="id58">:attr:`~Option.type`</span></a>, <a href="#id59"><span class="problematic" id="id60">:attr:`~Option.dest`</span></a>
(destination), and <a href="#id61"><span class="problematic" id="id62">:attr:`~Option.help`</span></a>. Of these, <a href="#id63"><span class="problematic" id="id64">:attr:`~Option.action`</span></a> is the
most fundamental.</p>
<div class="system-message" id="id55">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 300); <em><a href="#id56">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<div class="system-message" id="id57">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 300); <em><a href="#id58">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<div class="system-message" id="id59">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 300); <em><a href="#id60">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<div class="system-message" id="id61">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 300); <em><a href="#id62">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<div class="system-message" id="id63">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 300); <em><a href="#id64">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<div class="section" id="understanding-option-actions">
<span id="optparse-understanding-option-actions"></span><h2>Understanding option actions</h2>
<p>Actions tell <a href="#id65"><span class="problematic" id="id66">:mod:`optparse`</span></a> what to do when it encounters an option on the
command line.  There is a fixed set of actions hard-coded into <a href="#id67"><span class="problematic" id="id68">:mod:`optparse`</span></a>;
adding new actions is an advanced topic covered in section
<a href="#id69"><span class="problematic" id="id70">:ref:`optparse-extending-optparse`</span></a>.  Most actions tell <a href="#id71"><span class="problematic" id="id72">:mod:`optparse`</span></a> to store
a value in some variable---for example, take a string from the command line and
store it in an attribute of <tt class="docutils literal">options</tt>.</p>
<div class="system-message" id="id65">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 311); <em><a href="#id66">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id67">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 311); <em><a href="#id68">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id69">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 311); <em><a href="#id70">backlink</a></em></p>
Unknown interpreted text role &quot;ref&quot;.</div>
<div class="system-message" id="id71">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 311); <em><a href="#id72">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<p>If you don't specify an option action, <a href="#id73"><span class="problematic" id="id74">:mod:`optparse`</span></a> defaults to <tt class="docutils literal">store</tt>.</p>
<div class="system-message" id="id73">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 318); <em><a href="#id74">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
</div>
<div class="section" id="the-store-action">
<span id="optparse-store-action"></span><h2>The store action</h2>
<p>The most common option action is <tt class="docutils literal">store</tt>, which tells <a href="#id75"><span class="problematic" id="id76">:mod:`optparse`</span></a> to take
the next argument (or the remainder of the current argument), ensure that it is
of the correct type, and store it to your chosen destination.</p>
<div class="system-message" id="id75">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 326); <em><a href="#id76">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<p>For example:</p>
<pre class="literal-block">
parser.add_option(&quot;-f&quot;, &quot;--file&quot;,
                  action=&quot;store&quot;, type=&quot;string&quot;, dest=&quot;filename&quot;)
</pre>
<p>Now let's make up a fake command line and ask <a href="#id77"><span class="problematic" id="id78">:mod:`optparse`</span></a> to parse it:</p>
<div class="system-message" id="id77">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 335); <em><a href="#id78">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<pre class="literal-block">
args = [&quot;-f&quot;, &quot;foo.txt&quot;]
(options, args) = parser.parse_args(args)
</pre>
<p>When <a href="#id79"><span class="problematic" id="id80">:mod:`optparse`</span></a> sees the option string <tt class="docutils literal"><span class="pre">-f</span></tt>, it consumes the next
argument, <tt class="docutils literal">foo.txt</tt>, and stores it in <tt class="docutils literal">options.filename</tt>.  So, after this
call to <a href="#id81"><span class="problematic" id="id82">:meth:`parse_args`</span></a>, <tt class="docutils literal">options.filename</tt> is <tt class="docutils literal">&quot;foo.txt&quot;</tt>.</p>
<div class="system-message" id="id79">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 340); <em><a href="#id80">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id81">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 340); <em><a href="#id82">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<p>Some other option types supported by <a href="#id83"><span class="problematic" id="id84">:mod:`optparse`</span></a> are <tt class="docutils literal">int</tt> and <tt class="docutils literal">float</tt>.
Here's an option that expects an integer argument:</p>
<div class="system-message" id="id83">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 344); <em><a href="#id84">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<pre class="literal-block">
parser.add_option(&quot;-n&quot;, type=&quot;int&quot;, dest=&quot;num&quot;)
</pre>
<p>Note that this option has no long option string, which is perfectly acceptable.
Also, there's no explicit action, since the default is <tt class="docutils literal">store</tt>.</p>
<p>Let's parse another fake command-line.  This time, we'll jam the option argument
right up against the option: since <tt class="docutils literal"><span class="pre">-n42</span></tt> (one argument) is equivalent to
<tt class="docutils literal"><span class="pre">-n</span> 42</tt> (two arguments), the code</p>
<pre class="literal-block">
(options, args) = parser.parse_args([&quot;-n42&quot;])
print(options.num)
</pre>
<p>will print <tt class="docutils literal">42</tt>.</p>
<p>If you don't specify a type, <a href="#id85"><span class="problematic" id="id86">:mod:`optparse`</span></a> assumes <tt class="docutils literal">string</tt>.  Combined with
the fact that the default action is <tt class="docutils literal">store</tt>, that means our first example can
be a lot shorter:</p>
<div class="system-message" id="id85">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 361); <em><a href="#id86">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<pre class="literal-block">
parser.add_option(&quot;-f&quot;, &quot;--file&quot;, dest=&quot;filename&quot;)
</pre>
<p>If you don't supply a destination, <a href="#id87"><span class="problematic" id="id88">:mod:`optparse`</span></a> figures out a sensible
default from the option strings: if the first long option string is
<tt class="docutils literal"><span class="pre">--foo-bar</span></tt>, then the default destination is <tt class="docutils literal">foo_bar</tt>.  If there are no
long option strings, <a href="#id89"><span class="problematic" id="id90">:mod:`optparse`</span></a> looks at the first short option string: the
default destination for <tt class="docutils literal"><span class="pre">-f</span></tt> is <tt class="docutils literal">f</tt>.</p>
<div class="system-message" id="id87">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 367); <em><a href="#id88">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id89">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 367); <em><a href="#id90">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<p><a href="#id91"><span class="problematic" id="id92">:mod:`optparse`</span></a> also includes the built-in <tt class="docutils literal">complex</tt> type.  Adding
types is covered in section <a href="#id93"><span class="problematic" id="id94">:ref:`optparse-extending-optparse`</span></a>.</p>
<div class="system-message" id="id91">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 373); <em><a href="#id92">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id93">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 373); <em><a href="#id94">backlink</a></em></p>
Unknown interpreted text role &quot;ref&quot;.</div>
</div>
<div class="section" id="handling-boolean-flag-options">
<span id="optparse-handling-boolean-options"></span><h2>Handling boolean (flag) options</h2>
<p>Flag options---set a variable to true or false when a particular option is
seen---are quite common.  <a href="#id95"><span class="problematic" id="id96">:mod:`optparse`</span></a> supports them with two separate actions,
<tt class="docutils literal">store_true</tt> and <tt class="docutils literal">store_false</tt>.  For example, you might have a <tt class="docutils literal">verbose</tt>
flag that is turned on with <tt class="docutils literal"><span class="pre">-v</span></tt> and off with <tt class="docutils literal"><span class="pre">-q</span></tt>:</p>
<div class="system-message" id="id95">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 382); <em><a href="#id96">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<pre class="literal-block">
parser.add_option(&quot;-v&quot;, action=&quot;store_true&quot;, dest=&quot;verbose&quot;)
parser.add_option(&quot;-q&quot;, action=&quot;store_false&quot;, dest=&quot;verbose&quot;)
</pre>
<p>Here we have two different options with the same destination, which is perfectly
OK.  (It just means you have to be a bit careful when setting default
values---see below.)</p>
<p>When <a href="#id97"><span class="problematic" id="id98">:mod:`optparse`</span></a> encounters <tt class="docutils literal"><span class="pre">-v</span></tt> on the command line, it sets
<tt class="docutils literal">options.verbose</tt> to <tt class="docutils literal">True</tt>; when it encounters <tt class="docutils literal"><span class="pre">-q</span></tt>,
<tt class="docutils literal">options.verbose</tt> is set to <tt class="docutils literal">False</tt>.</p>
<div class="system-message" id="id97">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 394); <em><a href="#id98">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
</div>
<div class="section" id="other-actions">
<span id="optparse-other-actions"></span><h2>Other actions</h2>
<p>Some other actions supported by <a href="#id99"><span class="problematic" id="id100">:mod:`optparse`</span></a> are:</p>
<div class="system-message" id="id99">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 404); <em><a href="#id100">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<dl class="docutils">
<dt><tt class="docutils literal">&quot;store_const&quot;</tt></dt>
<dd>store a constant value</dd>
<dt><tt class="docutils literal">&quot;append&quot;</tt></dt>
<dd>append this option's argument to a list</dd>
<dt><tt class="docutils literal">&quot;count&quot;</tt></dt>
<dd>increment a counter by one</dd>
<dt><tt class="docutils literal">&quot;callback&quot;</tt></dt>
<dd>call a specified function</dd>
</dl>
<p>These are covered in section <a href="#id101"><span class="problematic" id="id102">:ref:`optparse-reference-guide`</span></a>,
and section <a href="#id103"><span class="problematic" id="id104">:ref:`optparse-option-callbacks`</span></a>.</p>
<div class="system-message" id="id101">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 418); <em><a href="#id102">backlink</a></em></p>
Unknown interpreted text role &quot;ref&quot;.</div>
<div class="system-message" id="id103">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 418); <em><a href="#id104">backlink</a></em></p>
Unknown interpreted text role &quot;ref&quot;.</div>
</div>
<div class="section" id="default-values">
<span id="optparse-default-values"></span><h2>Default values</h2>
<p>All of the above examples involve setting some variable (the &quot;destination&quot;) when
certain command-line options are seen.  What happens if those options are never
seen?  Since we didn't supply any defaults, they are all set to <tt class="docutils literal">None</tt>.  This
is usually fine, but sometimes you want more control.  <a href="#id105"><span class="problematic" id="id106">:mod:`optparse`</span></a> lets you
supply a default value for each destination, which is assigned before the
command line is parsed.</p>
<div class="system-message" id="id105">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 427); <em><a href="#id106">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<p>First, consider the verbose/quiet example.  If we want <a href="#id107"><span class="problematic" id="id108">:mod:`optparse`</span></a> to set
<tt class="docutils literal">verbose</tt> to <tt class="docutils literal">True</tt> unless <tt class="docutils literal"><span class="pre">-q</span></tt> is seen, then we can do this:</p>
<div class="system-message" id="id107">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 434); <em><a href="#id108">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<pre class="literal-block">
parser.add_option(&quot;-v&quot;, action=&quot;store_true&quot;, dest=&quot;verbose&quot;, default=True)
parser.add_option(&quot;-q&quot;, action=&quot;store_false&quot;, dest=&quot;verbose&quot;)
</pre>
<p>Since default values apply to the <em>destination</em> rather than to any particular
option, and these two options happen to have the same destination, this is
exactly equivalent:</p>
<pre class="literal-block">
parser.add_option(&quot;-v&quot;, action=&quot;store_true&quot;, dest=&quot;verbose&quot;)
parser.add_option(&quot;-q&quot;, action=&quot;store_false&quot;, dest=&quot;verbose&quot;, default=True)
</pre>
<p>Consider this:</p>
<pre class="literal-block">
parser.add_option(&quot;-v&quot;, action=&quot;store_true&quot;, dest=&quot;verbose&quot;, default=False)
parser.add_option(&quot;-q&quot;, action=&quot;store_false&quot;, dest=&quot;verbose&quot;, default=True)
</pre>
<p>Again, the default value for <tt class="docutils literal">verbose</tt> will be <tt class="docutils literal">True</tt>: the last default
value supplied for any particular destination is the one that counts.</p>
<p>A clearer way to specify default values is the <a href="#id109"><span class="problematic" id="id110">:meth:`set_defaults`</span></a> method of
OptionParser, which you can call at any time before calling <a href="#id111"><span class="problematic" id="id112">:meth:`parse_args`</span></a>:</p>
<div class="system-message" id="id109">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 455); <em><a href="#id110">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<div class="system-message" id="id111">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 455); <em><a href="#id112">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<pre class="literal-block">
parser.set_defaults(verbose=True)
parser.add_option(...)
(options, args) = parser.parse_args()
</pre>
<p>As before, the last value specified for a given option destination is the one
that counts.  For clarity, try to use one method or the other of setting default
values, not both.</p>
</div>
<div class="section" id="generating-help">
<span id="optparse-generating-help"></span><h2>Generating help</h2>
<p><a href="#id113"><span class="problematic" id="id114">:mod:`optparse`</span></a>'s ability to generate help and usage text automatically is
useful for creating user-friendly command-line interfaces.  All you have to do
is supply a <a href="#id115"><span class="problematic" id="id116">:attr:`~Option.help`</span></a> value for each option, and optionally a short
usage message for your whole program.  Here's an OptionParser populated with
user-friendly (documented) options:</p>
<div class="system-message" id="id113">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 472); <em><a href="#id114">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id115">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 472); <em><a href="#id116">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<pre class="literal-block">
usage = &quot;usage: %prog [options] arg1 arg2&quot;
parser = OptionParser(usage=usage)
parser.add_option(&quot;-v&quot;, &quot;--verbose&quot;,
                  action=&quot;store_true&quot;, dest=&quot;verbose&quot;, default=True,
                  help=&quot;make lots of noise [default]&quot;)
parser.add_option(&quot;-q&quot;, &quot;--quiet&quot;,
                  action=&quot;store_false&quot;, dest=&quot;verbose&quot;,
                  help=&quot;be vewwy quiet (I'm hunting wabbits)&quot;)
parser.add_option(&quot;-f&quot;, &quot;--filename&quot;,
                  metavar=&quot;FILE&quot;, help=&quot;write output to FILE&quot;)
parser.add_option(&quot;-m&quot;, &quot;--mode&quot;,
                  default=&quot;intermediate&quot;,
                  help=&quot;interaction mode: novice, intermediate, &quot;
                       &quot;or expert [default: %default]&quot;)
</pre>
<p>If <a href="#id117"><span class="problematic" id="id118">:mod:`optparse`</span></a> encounters either <tt class="docutils literal"><span class="pre">-h</span></tt> or <tt class="docutils literal"><span class="pre">--help</span></tt> on the
command-line, or if you just call <a href="#id119"><span class="problematic" id="id120">:meth:`parser.print_help`</span></a>, it prints the
following to standard output:</p>
<div class="system-message" id="id117">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 493); <em><a href="#id118">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id119">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 493); <em><a href="#id120">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<pre class="code text literal-block">
Usage: &lt;yourscript&gt; [options] arg1 arg2

Options:
  -h, --help            show this help message and exit
  -v, --verbose         make lots of noise [default]
  -q, --quiet           be vewwy quiet (I'm hunting wabbits)
  -f FILE, --filename=FILE
                        write output to FILE
  -m MODE, --mode=MODE  interaction mode: novice, intermediate, or
                        expert [default: intermediate]
</pre>
<p>(If the help output is triggered by a help option, <a href="#id121"><span class="problematic" id="id122">:mod:`optparse`</span></a> exits after
printing the help text.)</p>
<div class="system-message" id="id121">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 510); <em><a href="#id122">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<p>There's a lot going on here to help <a href="#id123"><span class="problematic" id="id124">:mod:`optparse`</span></a> generate the best possible
help message:</p>
<div class="system-message" id="id123">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 513); <em><a href="#id124">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<ul>
<li><p class="first">the script defines its own usage message:</p>
<pre class="literal-block">
usage = &quot;usage: %prog [options] arg1 arg2&quot;
</pre>
<p><a href="#id125"><span class="problematic" id="id126">:mod:`optparse`</span></a> expands <tt class="docutils literal">%prog</tt> in the usage string to the name of the
current program, i.e. <tt class="docutils literal">os.path.basename(sys.argv[0])</tt>.  The expanded string
is then printed before the detailed option help.</p>
<div class="system-message" id="id125">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 520); <em><a href="#id126">backlink</a></em></p>
<p>Unknown interpreted text role &quot;mod&quot;.</p>
</div>
<p>If you don't supply a usage string, <a href="#id127"><span class="problematic" id="id128">:mod:`optparse`</span></a> uses a bland but sensible
default: <tt class="docutils literal">&quot;Usage: %prog [options]&quot;</tt>, which is fine if your script doesn't
take any positional arguments.</p>
<div class="system-message" id="id127">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 524); <em><a href="#id128">backlink</a></em></p>
<p>Unknown interpreted text role &quot;mod&quot;.</p>
</div>
</li>
<li><p class="first">every option defines a help string, and doesn't worry about
line-wrapping---<a href="#id129"><span class="problematic" id="id130">:mod:`optparse`</span></a> takes care of wrapping lines and making
the help output look good.</p>
<div class="system-message" id="id129">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 528); <em><a href="#id130">backlink</a></em></p>
<p>Unknown interpreted text role &quot;mod&quot;.</p>
</div>
</li>
<li><p class="first">options that take a value indicate this fact in their automatically-generated
help message, e.g. for the &quot;mode&quot; option:</p>
<pre class="literal-block">
-m MODE, --mode=MODE
</pre>
<p>Here, &quot;MODE&quot; is called the meta-variable: it stands for the argument that the
user is expected to supply to <tt class="docutils literal"><span class="pre">-m</span></tt>/<tt class="docutils literal"><span class="pre">--mode</span></tt>.  By default,
<a href="#id131"><span class="problematic" id="id132">:mod:`optparse`</span></a> converts the destination variable name to uppercase and uses
that for the meta-variable.  Sometimes, that's not what you want---for
example, the <tt class="docutils literal"><span class="pre">--filename</span></tt> option explicitly sets <tt class="docutils literal"><span class="pre">metavar=&quot;FILE&quot;</span></tt>,
resulting in this automatically-generated option description:</p>
<div class="system-message" id="id131">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 537); <em><a href="#id132">backlink</a></em></p>
<p>Unknown interpreted text role &quot;mod&quot;.</p>
</div>
<pre class="literal-block">
-f FILE, --filename=FILE
</pre>
<p>This is important for more than just saving space, though: the manually
written help text uses the meta-variable <tt class="docutils literal">FILE</tt> to clue the user in that
there's a connection between the semi-formal syntax <tt class="docutils literal"><span class="pre">-f</span> FILE</tt> and the informal
semantic description &quot;write output to FILE&quot;. This is a simple but effective
way to make your help text a lot clearer and more useful for end users.</p>
</li>
<li><p class="first">options that have a default value can include <tt class="docutils literal">%default</tt> in the help
string---<a href="#id133"><span class="problematic" id="id134">:mod:`optparse`</span></a> will replace it with <a href="#id135"><span class="problematic" id="id136">:func:`str`</span></a> of the option's
default value.  If an option has no default value (or the default value is
<tt class="docutils literal">None</tt>), <tt class="docutils literal">%default</tt> expands to <tt class="docutils literal">none</tt>.</p>
<div class="system-message" id="id133">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 552); <em><a href="#id134">backlink</a></em></p>
<p>Unknown interpreted text role &quot;mod&quot;.</p>
</div>
<div class="system-message" id="id135">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 552); <em><a href="#id136">backlink</a></em></p>
<p>Unknown interpreted text role &quot;func&quot;.</p>
</div>
</li>
</ul>
<div class="section" id="grouping-options">
<h3>Grouping Options</h3>
<p>When dealing with many options, it is convenient to group these options for
better help output.  An <a href="#id137"><span class="problematic" id="id138">:class:`OptionParser`</span></a> can contain several option groups,
each of which can contain several options.</p>
<div class="system-message" id="id137">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 560); <em><a href="#id138">backlink</a></em></p>
Unknown interpreted text role &quot;class&quot;.</div>
<p>An option group is obtained using the class <a href="#id139"><span class="problematic" id="id140">:class:`OptionGroup`</span></a>:</p>
<div class="system-message" id="id139">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 564); <em><a href="#id140">backlink</a></em></p>
Unknown interpreted text role &quot;class&quot;.</div>
<p class="optiongroup-parser title description-none">where</p>
<ul class="optiongroup-parser title description-none">
<li><p class="first">parser is the <a href="#id141"><span class="problematic" id="id142">:class:`OptionParser`</span></a> instance the group will be inserted in
to</p>
<div class="system-message" id="id141">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 570); <em><a href="#id142">backlink</a></em></p>
<p>Unknown interpreted text role &quot;class&quot;.</p>
</div>
</li>
<li><p class="first">title is the group title</p>
</li>
<li><p class="first">description, optional, is a long description of the group</p>
</li>
</ul>
<p><a href="#id143"><span class="problematic" id="id144">:class:`OptionGroup`</span></a> inherits from <a href="#id145"><span class="problematic" id="id146">:class:`OptionContainer`</span></a> (like
<a href="#id147"><span class="problematic" id="id148">:class:`OptionParser`</span></a>) and so the <a href="#id149"><span class="problematic" id="id150">:meth:`add_option`</span></a> method can be used to add
an option to the group.</p>
<div class="system-message" id="id143">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 575); <em><a href="#id144">backlink</a></em></p>
Unknown interpreted text role &quot;class&quot;.</div>
<div class="system-message" id="id145">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 575); <em><a href="#id146">backlink</a></em></p>
Unknown interpreted text role &quot;class&quot;.</div>
<div class="system-message" id="id147">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 575); <em><a href="#id148">backlink</a></em></p>
Unknown interpreted text role &quot;class&quot;.</div>
<div class="system-message" id="id149">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 575); <em><a href="#id150">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<p>Once all the options are declared, using the <a href="#id151"><span class="problematic" id="id152">:class:`OptionParser`</span></a> method
<a href="#id153"><span class="problematic" id="id154">:meth:`add_option_group`</span></a> the group is added to the previously defined parser.</p>
<div class="system-message" id="id151">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 579); <em><a href="#id152">backlink</a></em></p>
Unknown interpreted text role &quot;class&quot;.</div>
<div class="system-message" id="id153">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 579); <em><a href="#id154">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<p>Continuing with the parser defined in the previous section, adding an
<a href="#id155"><span class="problematic" id="id156">:class:`OptionGroup`</span></a> to a parser is easy:</p>
<div class="system-message" id="id155">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 582); <em><a href="#id156">backlink</a></em></p>
Unknown interpreted text role &quot;class&quot;.</div>
<pre class="literal-block">
group = OptionGroup(parser, &quot;Dangerous Options&quot;,
                    &quot;Caution: use these options at your own risk.  &quot;
                    &quot;It is believed that some of them bite.&quot;)
group.add_option(&quot;-g&quot;, action=&quot;store_true&quot;, help=&quot;Group option.&quot;)
parser.add_option_group(group)
</pre>
<p>This would result in the following help output:</p>
<pre class="code text literal-block">
Usage: &lt;yourscript&gt; [options] arg1 arg2

Options:
  -h, --help            show this help message and exit
  -v, --verbose         make lots of noise [default]
  -q, --quiet           be vewwy quiet (I'm hunting wabbits)
  -f FILE, --filename=FILE
                        write output to FILE
  -m MODE, --mode=MODE  interaction mode: novice, intermediate, or
                        expert [default: intermediate]

  Dangerous Options:
    Caution: use these options at your own risk.  It is believed that some
    of them bite.

    -g                  Group option.
</pre>
<p>A bit more complete example might involve using more than one group: still
extending the previous example:</p>
<pre class="literal-block">
group = OptionGroup(parser, &quot;Dangerous Options&quot;,
                    &quot;Caution: use these options at your own risk.  &quot;
                    &quot;It is believed that some of them bite.&quot;)
group.add_option(&quot;-g&quot;, action=&quot;store_true&quot;, help=&quot;Group option.&quot;)
parser.add_option_group(group)

group = OptionGroup(parser, &quot;Debug Options&quot;)
group.add_option(&quot;-d&quot;, &quot;--debug&quot;, action=&quot;store_true&quot;,
                 help=&quot;Print debug information&quot;)
group.add_option(&quot;-s&quot;, &quot;--sql&quot;, action=&quot;store_true&quot;,
                 help=&quot;Print all SQL statements executed&quot;)
group.add_option(&quot;-e&quot;, action=&quot;store_true&quot;, help=&quot;Print every action done&quot;)
parser.add_option_group(group)
</pre>
<p>that results in the following output:</p>
<pre class="code text literal-block">
Usage: &lt;yourscript&gt; [options] arg1 arg2

Options:
  -h, --help            show this help message and exit
  -v, --verbose         make lots of noise [default]
  -q, --quiet           be vewwy quiet (I'm hunting wabbits)
  -f FILE, --filename=FILE
                        write output to FILE
  -m MODE, --mode=MODE  interaction mode: novice, intermediate, or expert
                        [default: intermediate]

  Dangerous Options:
    Caution: use these options at your own risk.  It is believed that some
    of them bite.

    -g                  Group option.

  Debug Options:
    -d, --debug         Print debug information
    -s, --sql           Print all SQL statements executed
    -e                  Print every action done
</pre>
<p>Another interesting method, in particular when working programmatically with
option groups is:</p>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 658)</p>
<p>Unknown directive type &quot;method&quot;.</p>
<pre class="literal-block">
.. method:: OptionParser.get_option_group(opt_str)

   Return the :class:`OptionGroup` to which the short or long option
   string *opt_str* (e.g. ``'-o'`` or ``'--option'``) belongs. If
   there's no such :class:`OptionGroup`, return ``None``.

</pre>
</div>
</div>
</div>
<div class="section" id="printing-a-version-string">
<span id="optparse-printing-version-string"></span><h2>Printing a version string</h2>
<p>Similar to the brief usage string, <a href="#id157"><span class="problematic" id="id158">:mod:`optparse`</span></a> can also print a version
string for your program.  You have to supply the string as the <tt class="docutils literal">version</tt>
argument to OptionParser:</p>
<div class="system-message" id="id157">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 669); <em><a href="#id158">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<pre class="literal-block">
parser = OptionParser(usage=&quot;%prog [-f] [-q]&quot;, version=&quot;%prog 1.0&quot;)
</pre>
<p><tt class="docutils literal">%prog</tt> is expanded just like it is in <tt class="docutils literal">usage</tt>.  Apart from that,
<tt class="docutils literal">version</tt> can contain anything you like.  When you supply it, <a href="#id159"><span class="problematic" id="id160">:mod:`optparse`</span></a>
automatically adds a <tt class="docutils literal"><span class="pre">--version</span></tt> option to your parser. If it encounters
this option on the command line, it expands your <tt class="docutils literal">version</tt> string (by
replacing <tt class="docutils literal">%prog</tt>), prints it to stdout, and exits.</p>
<div class="system-message" id="id159">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 675); <em><a href="#id160">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<p>For example, if your script is called <tt class="docutils literal">/usr/bin/foo</tt>:</p>
<pre class="code shell-session literal-block">
<span class="generic prompt">$ </span>/usr/bin/foo --version
<span class="generic output">foo 1.0</span>
</pre>
<p>The following two methods can be used to print and get the <tt class="docutils literal">version</tt> string:</p>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 690)</p>
<p>Unknown directive type &quot;method&quot;.</p>
<pre class="literal-block">
.. method:: OptionParser.print_version(file=None)

   Print the version message for the current program (``self.version``) to
   *file* (default stdout).  As with :meth:`print_usage`, any occurrence
   of ``%prog`` in ``self.version`` is replaced with the name of the current
   program.  Does nothing if ``self.version`` is empty or undefined.

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 697)</p>
<p>Unknown directive type &quot;method&quot;.</p>
<pre class="literal-block">
.. method:: OptionParser.get_version()

   Same as :meth:`print_version` but returns the version string instead of
   printing it.


</pre>
</div>
</div>
<div class="section" id="how-mod-optparse-handles-errors">
<span id="optparse-how-optparse-handles-errors"></span><h2>How <a href="#id161"><span class="problematic" id="id162">:mod:`optparse`</span></a> handles errors</h2>
<div class="system-message" id="id161">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 705); <em><a href="#id162">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<p>There are two broad classes of errors that <a href="#id163"><span class="problematic" id="id164">:mod:`optparse`</span></a> has to worry about:
programmer errors and user errors.  Programmer errors are usually erroneous
calls to <a href="#id165"><span class="problematic" id="id166">:func:`OptionParser.add_option`</span></a>, e.g. invalid option strings, unknown
option attributes, missing option attributes, etc.  These are dealt with in the
usual way: raise an exception (either <a href="#id167"><span class="problematic" id="id168">:exc:`optparse.OptionError`</span></a> or
<a href="#id169"><span class="problematic" id="id170">:exc:`TypeError`</span></a>) and let the program crash.</p>
<div class="system-message" id="id163">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 708); <em><a href="#id164">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id165">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 708); <em><a href="#id166">backlink</a></em></p>
Unknown interpreted text role &quot;func&quot;.</div>
<div class="system-message" id="id167">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 708); <em><a href="#id168">backlink</a></em></p>
Unknown interpreted text role &quot;exc&quot;.</div>
<div class="system-message" id="id169">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 708); <em><a href="#id170">backlink</a></em></p>
Unknown interpreted text role &quot;exc&quot;.</div>
<p>Handling user errors is much more important, since they are guaranteed to happen
no matter how stable your code is.  <a href="#id171"><span class="problematic" id="id172">:mod:`optparse`</span></a> can automatically detect
some user errors, such as bad option arguments (passing <tt class="docutils literal"><span class="pre">-n</span> 4x</tt> where
<tt class="docutils literal"><span class="pre">-n</span></tt> takes an integer argument), missing arguments (<tt class="docutils literal"><span class="pre">-n</span></tt> at the end
of the command line, where <tt class="docutils literal"><span class="pre">-n</span></tt> takes an argument of any type).  Also,
you can call <a href="#id173"><span class="problematic" id="id174">:func:`OptionParser.error`</span></a> to signal an application-defined error
condition:</p>
<div class="system-message" id="id171">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 715); <em><a href="#id172">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id173">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 715); <em><a href="#id174">backlink</a></em></p>
Unknown interpreted text role &quot;func&quot;.</div>
<pre class="literal-block">
(options, args) = parser.parse_args()
...
if options.a and options.b:
    parser.error(&quot;options -a and -b are mutually exclusive&quot;)
</pre>
<p>In either case, <a href="#id175"><span class="problematic" id="id176">:mod:`optparse`</span></a> handles the error the same way: it prints the
program's usage message and an error message to standard error and exits with
error status 2.</p>
<div class="system-message" id="id175">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 728); <em><a href="#id176">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<p>Consider the first example above, where the user passes <tt class="docutils literal">4x</tt> to an option
that takes an integer:</p>
<pre class="code shell-session literal-block">
<span class="generic prompt">$ </span>/usr/bin/foo -n 4x
<span class="generic output">Usage: foo [options]

foo: error: option -n: invalid integer value: '4x'</span>
</pre>
<p>Or, where the user fails to pass a value at all:</p>
<pre class="code shell-session literal-block">
<span class="generic prompt">$ </span>/usr/bin/foo -n
<span class="generic output">Usage: foo [options]

foo: error: -n option requires an argument</span>
</pre>
<p><a href="#id177"><span class="problematic" id="id178">:mod:`optparse`</span></a>-generated error messages take care always to mention the
option involved in the error; be sure to do the same when calling
<a href="#id179"><span class="problematic" id="id180">:func:`OptionParser.error`</span></a> from your application code.</p>
<div class="system-message" id="id177">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 751); <em><a href="#id178">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id179">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 751); <em><a href="#id180">backlink</a></em></p>
Unknown interpreted text role &quot;func&quot;.</div>
<p>If <a href="#id181"><span class="problematic" id="id182">:mod:`optparse`</span></a>'s default error-handling behaviour does not suit your needs,
you'll need to subclass OptionParser and override its <a href="#id183"><span class="problematic" id="id184">:meth:`~OptionParser.exit`</span></a>
and/or <a href="#id185"><span class="problematic" id="id186">:meth:`~OptionParser.error`</span></a> methods.</p>
<div class="system-message" id="id181">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 755); <em><a href="#id182">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id183">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 755); <em><a href="#id184">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<div class="system-message" id="id185">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 755); <em><a href="#id186">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
</div>
<div class="section" id="putting-it-all-together">
<span id="optparse-putting-it-all-together"></span><h2>Putting it all together</h2>
<p>Here's what <a href="#id187"><span class="problematic" id="id188">:mod:`optparse`</span></a>-based scripts usually look like:</p>
<div class="system-message" id="id187">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 765); <em><a href="#id188">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<pre class="literal-block">
from optparse import OptionParser
...
def main():
    usage = &quot;usage: %prog [options] arg&quot;
    parser = OptionParser(usage)
    parser.add_option(&quot;-f&quot;, &quot;--file&quot;, dest=&quot;filename&quot;,
                      help=&quot;read data from FILENAME&quot;)
    parser.add_option(&quot;-v&quot;, &quot;--verbose&quot;,
                      action=&quot;store_true&quot;, dest=&quot;verbose&quot;)
    parser.add_option(&quot;-q&quot;, &quot;--quiet&quot;,
                      action=&quot;store_false&quot;, dest=&quot;verbose&quot;)
    ...
    (options, args) = parser.parse_args()
    if len(args) != 1:
        parser.error(&quot;incorrect number of arguments&quot;)
    if options.verbose:
        print(&quot;reading %s...&quot; % options.filename)
    ...

if __name__ == &quot;__main__&quot;:
    main()
</pre>
</div>
</div>
<div class="section" id="reference-guide">
<span id="optparse-reference-guide"></span><h1>Reference Guide</h1>
<div class="section" id="creating-the-parser">
<span id="optparse-creating-parser"></span><h2>Creating the parser</h2>
<p>The first step in using <a href="#id189"><span class="problematic" id="id190">:mod:`optparse`</span></a> is to create an OptionParser instance.</p>
<div class="system-message" id="id189">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 801); <em><a href="#id190">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<p class="optionparser">The OptionParser constructor has no required arguments, but a number of
optional keyword arguments.  You should always pass them as keyword
arguments, i.e. do not rely on the order in which the arguments are declared.</p>
<dl class="optionparser docutils">
<dt><tt class="docutils literal">usage</tt> (default: <tt class="docutils literal">&quot;%prog [options]&quot;</tt>)</dt>
<dd><p class="first">The usage summary to print when your program is run incorrectly or with a
help option.  When <a href="#id191"><span class="problematic" id="id192">:mod:`optparse`</span></a> prints the usage string, it expands
<tt class="docutils literal">%prog</tt> to <tt class="docutils literal">os.path.basename(sys.argv[0])</tt> (or to <tt class="docutils literal">prog</tt> if you
passed that keyword argument).  To suppress a usage message, pass the
special value <a href="#id193"><span class="problematic" id="id194">:data:`optparse.SUPPRESS_USAGE`</span></a>.</p>
<div class="system-message" id="id191">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 810); <em><a href="#id192">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="last system-message" id="id193">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 810); <em><a href="#id194">backlink</a></em></p>
Unknown interpreted text role &quot;data&quot;.</div>
</dd>
<dt><tt class="docutils literal">option_list</tt> (default: <tt class="docutils literal">[]</tt>)</dt>
<dd><p class="first">A list of Option objects to populate the parser with.  The options in
<tt class="docutils literal">option_list</tt> are added after any options in <tt class="docutils literal">standard_option_list</tt> (a
class attribute that may be set by OptionParser subclasses), but before
any version or help options. Deprecated; use <a href="#id195"><span class="problematic" id="id196">:meth:`add_option`</span></a> after
creating the parser instead.</p>
<div class="last system-message" id="id195">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 817); <em><a href="#id196">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
</dd>
<dt><tt class="docutils literal">option_class</tt> (default: optparse.Option)</dt>
<dd><p class="first">Class to use when adding options to the parser in <a href="#id197"><span class="problematic" id="id198">:meth:`add_option`</span></a>.</p>
<div class="last system-message" id="id197">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 824); <em><a href="#id198">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
</dd>
<dt><tt class="docutils literal">version</tt> (default: <tt class="docutils literal">None</tt>)</dt>
<dd><p class="first">A version string to print when the user supplies a version option. If you
supply a true value for <tt class="docutils literal">version</tt>, <a href="#id199"><span class="problematic" id="id200">:mod:`optparse`</span></a> automatically adds a
version option with the single option string <tt class="docutils literal"><span class="pre">--version</span></tt>.  The
substring <tt class="docutils literal">%prog</tt> is expanded the same as for <tt class="docutils literal">usage</tt>.</p>
<div class="last system-message" id="id199">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 827); <em><a href="#id200">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
</dd>
<dt><tt class="docutils literal">conflict_handler</tt> (default: <tt class="docutils literal">&quot;error&quot;</tt>)</dt>
<dd><p class="first">Specifies what to do when options with conflicting option strings are
added to the parser; see section
<a href="#id201"><span class="problematic" id="id202">:ref:`optparse-conflicts-between-options`</span></a>.</p>
<div class="last system-message" id="id201">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 833); <em><a href="#id202">backlink</a></em></p>
Unknown interpreted text role &quot;ref&quot;.</div>
</dd>
<dt><tt class="docutils literal">description</tt> (default: <tt class="docutils literal">None</tt>)</dt>
<dd><p class="first">A paragraph of text giving a brief overview of your program.
<a href="#id203"><span class="problematic" id="id204">:mod:`optparse`</span></a> reformats this paragraph to fit the current terminal width
and prints it when the user requests help (after <tt class="docutils literal">usage</tt>, but before the
list of options).</p>
<div class="last system-message" id="id203">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 838); <em><a href="#id204">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
</dd>
<dt><tt class="docutils literal">formatter</tt> (default: a new <a href="#id205"><span class="problematic" id="id206">:class:`IndentedHelpFormatter`</span></a>)</dt>
<dd><div class="first system-message" id="id205">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 846); <em><a href="#id206">backlink</a></em></p>
Unknown interpreted text role &quot;class&quot;.</div>
<p>An instance of optparse.HelpFormatter that will be used for printing help
text.  <a href="#id207"><span class="problematic" id="id208">:mod:`optparse`</span></a> provides two concrete classes for this purpose:
IndentedHelpFormatter and TitledHelpFormatter.</p>
<div class="last system-message" id="id207">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 844); <em><a href="#id208">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
</dd>
<dt><tt class="docutils literal">add_help_option</tt> (default: <tt class="docutils literal">True</tt>)</dt>
<dd><p class="first">If true, <a href="#id209"><span class="problematic" id="id210">:mod:`optparse`</span></a> will add a help option (with option strings <tt class="docutils literal"><span class="pre">-h</span></tt>
and <tt class="docutils literal"><span class="pre">--help</span></tt>) to the parser.</p>
<div class="last system-message" id="id209">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 849); <em><a href="#id210">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
</dd>
<dt><tt class="docutils literal">prog</tt></dt>
<dd>The string to use when expanding <tt class="docutils literal">%prog</tt> in <tt class="docutils literal">usage</tt> and <tt class="docutils literal">version</tt>
instead of <tt class="docutils literal">os.path.basename(sys.argv[0])</tt>.</dd>
<dt><tt class="docutils literal">epilog</tt> (default: <tt class="docutils literal">None</tt>)</dt>
<dd>A paragraph of help text to print after the option help.</dd>
</dl>
</div>
<div class="section" id="populating-the-parser">
<span id="optparse-populating-parser"></span><h2>Populating the parser</h2>
<p>There are several ways to populate the parser with options.  The preferred way
is by using <a href="#id211"><span class="problematic" id="id212">:meth:`OptionParser.add_option`</span></a>, as shown in section
<a href="#id213"><span class="problematic" id="id214">:ref:`optparse-tutorial`</span></a>.  <a href="#id215"><span class="problematic" id="id216">:meth:`add_option`</span></a> can be called in one of two ways:</p>
<div class="system-message" id="id211">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 864); <em><a href="#id212">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<div class="system-message" id="id213">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 864); <em><a href="#id214">backlink</a></em></p>
Unknown interpreted text role &quot;ref&quot;.</div>
<div class="system-message" id="id215">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 864); <em><a href="#id216">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<ul>
<li><p class="first">pass it an Option instance (as returned by <a href="#id217"><span class="problematic" id="id218">:func:`make_option`</span></a>)</p>
<div class="system-message" id="id217">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 868); <em><a href="#id218">backlink</a></em></p>
<p>Unknown interpreted text role &quot;func&quot;.</p>
</div>
</li>
<li><p class="first">pass it any combination of positional and keyword arguments that are
acceptable to <a href="#id219"><span class="problematic" id="id220">:func:`make_option`</span></a> (i.e., to the Option constructor), and it
will create the Option instance for you</p>
<div class="system-message" id="id219">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 870); <em><a href="#id220">backlink</a></em></p>
<p>Unknown interpreted text role &quot;func&quot;.</p>
</div>
</li>
</ul>
<p>The other alternative is to pass a list of pre-constructed Option instances to
the OptionParser constructor, as in:</p>
<pre class="literal-block">
option_list = [
    make_option(&quot;-f&quot;, &quot;--filename&quot;,
                action=&quot;store&quot;, type=&quot;string&quot;, dest=&quot;filename&quot;),
    make_option(&quot;-q&quot;, &quot;--quiet&quot;,
                action=&quot;store_false&quot;, dest=&quot;verbose&quot;),
    ]
parser = OptionParser(option_list=option_list)
</pre>
<p>(<a href="#id221"><span class="problematic" id="id222">:func:`make_option`</span></a> is a factory function for creating Option instances;
currently it is an alias for the Option constructor.  A future version of
<a href="#id223"><span class="problematic" id="id224">:mod:`optparse`</span></a> may split Option into several classes, and <a href="#id225"><span class="problematic" id="id226">:func:`make_option`</span></a>
will pick the right class to instantiate.  Do not instantiate Option directly.)</p>
<div class="system-message" id="id221">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 885); <em><a href="#id222">backlink</a></em></p>
Unknown interpreted text role &quot;func&quot;.</div>
<div class="system-message" id="id223">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 885); <em><a href="#id224">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id225">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 885); <em><a href="#id226">backlink</a></em></p>
Unknown interpreted text role &quot;func&quot;.</div>
</div>
<div class="section" id="defining-options">
<span id="optparse-defining-options"></span><h2>Defining options</h2>
<p>Each Option instance represents a set of synonymous command-line option strings,
e.g. <tt class="docutils literal"><span class="pre">-f</span></tt> and <tt class="docutils literal"><span class="pre">--file</span></tt>.  You can specify any number of short or
long option strings, but you must specify at least one overall option string.</p>
<p>The canonical way to create an <a href="#id227"><span class="problematic" id="id228">:class:`Option`</span></a> instance is with the
<a href="#id229"><span class="problematic" id="id230">:meth:`add_option`</span></a> method of <a href="#id231"><span class="problematic" id="id232">:class:`OptionParser`</span></a>.</p>
<div class="system-message" id="id227">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 900); <em><a href="#id228">backlink</a></em></p>
Unknown interpreted text role &quot;class&quot;.</div>
<div class="system-message" id="id229">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 900); <em><a href="#id230">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<div class="system-message" id="id231">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 900); <em><a href="#id232">backlink</a></em></p>
Unknown interpreted text role &quot;class&quot;.</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 903)</p>
<p>Unknown directive type &quot;method&quot;.</p>
<pre class="literal-block">
.. method:: OptionParser.add_option(option)
            OptionParser.add_option(*opt_str, attr=value, ...)

   To define an option with only a short option string::

      parser.add_option(&quot;-f&quot;, attr=value, ...)

   And to define an option with only a long option string::

      parser.add_option(&quot;--foo&quot;, attr=value, ...)

   The keyword arguments define attributes of the new Option object.  The most
   important option attribute is :attr:`~Option.action`, and it largely
   determines which other attributes are relevant or required.  If you pass
   irrelevant option attributes, or fail to pass required ones, :mod:`optparse`
   raises an :exc:`OptionError` exception explaining your mistake.

   An option's *action* determines what :mod:`optparse` does when it encounters
   this option on the command-line.  The standard option actions hard-coded into
   :mod:`optparse` are:

   ``&quot;store&quot;``
      store this option's argument (default)

   ``&quot;store_const&quot;``
      store a constant value

   ``&quot;store_true&quot;``
      store ``True``

   ``&quot;store_false&quot;``
      store ``False``

   ``&quot;append&quot;``
      append this option's argument to a list

   ``&quot;append_const&quot;``
      append a constant value to a list

   ``&quot;count&quot;``
      increment a counter by one

   ``&quot;callback&quot;``
      call a specified function

   ``&quot;help&quot;``
      print a usage message including all options and the documentation for them

   (If you don't supply an action, the default is ``&quot;store&quot;``.  For this action,
   you may also supply :attr:`~Option.type` and :attr:`~Option.dest` option
   attributes; see :ref:`optparse-standard-option-actions`.)

</pre>
</div>
<p>As you can see, most actions involve storing or updating a value somewhere.
<a href="#id233"><span class="problematic" id="id234">:mod:`optparse`</span></a> always creates a special object for this, conventionally called
<tt class="docutils literal">options</tt> (it happens to be an instance of <a href="#id235"><span class="problematic" id="id236">:class:`optparse.Values`</span></a>).  Option
arguments (and various other values) are stored as attributes of this object,
according to the <a href="#id237"><span class="problematic" id="id238">:attr:`~Option.dest`</span></a> (destination) option attribute.</p>
<div class="system-message" id="id233">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 955); <em><a href="#id234">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id235">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 955); <em><a href="#id236">backlink</a></em></p>
Unknown interpreted text role &quot;class&quot;.</div>
<div class="system-message" id="id237">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 955); <em><a href="#id238">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<p>For example, when you call</p>
<pre class="literal-block">
parser.parse_args()
</pre>
<p>one of the first things <a href="#id239"><span class="problematic" id="id240">:mod:`optparse`</span></a> does is create the <tt class="docutils literal">options</tt> object:</p>
<div class="system-message" id="id239">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 965); <em><a href="#id240">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<pre class="literal-block">
options = Values()
</pre>
<p>If one of the options in this parser is defined with</p>
<pre class="literal-block">
parser.add_option(&quot;-f&quot;, &quot;--file&quot;, action=&quot;store&quot;, type=&quot;string&quot;, dest=&quot;filename&quot;)
</pre>
<p>and the command-line being parsed includes any of the following:</p>
<pre class="literal-block">
-ffoo
-f foo
--file=foo
--file foo
</pre>
<p>then <a href="#id241"><span class="problematic" id="id242">:mod:`optparse`</span></a>, on seeing this option, will do the equivalent of</p>
<div class="system-message" id="id241">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 980); <em><a href="#id242">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<pre class="literal-block">
options.filename = &quot;foo&quot;
</pre>
<p>The <a href="#id243"><span class="problematic" id="id244">:attr:`~Option.type`</span></a> and <a href="#id245"><span class="problematic" id="id246">:attr:`~Option.dest`</span></a> option attributes are almost
as important as <a href="#id247"><span class="problematic" id="id248">:attr:`~Option.action`</span></a>, but <a href="#id249"><span class="problematic" id="id250">:attr:`~Option.action`</span></a> is the only
one that makes sense for <em>all</em> options.</p>
<div class="system-message" id="id243">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 984); <em><a href="#id244">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<div class="system-message" id="id245">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 984); <em><a href="#id246">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<div class="system-message" id="id247">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 984); <em><a href="#id248">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<div class="system-message" id="id249">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 984); <em><a href="#id250">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
</div>
<div class="section" id="option-attributes">
<span id="optparse-option-attributes"></span><h2>Option attributes</h2>
<p>The following option attributes may be passed as keyword arguments to
<a href="#id251"><span class="problematic" id="id252">:meth:`OptionParser.add_option`</span></a>.  If you pass an option attribute that is not
relevant to a particular option, or fail to pass a required option attribute,
<a href="#id253"><span class="problematic" id="id254">:mod:`optparse`</span></a> raises <a href="#id255"><span class="problematic" id="id256">:exc:`OptionError`</span></a>.</p>
<div class="system-message" id="id251">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 994); <em><a href="#id252">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<div class="system-message" id="id253">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 994); <em><a href="#id254">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id255">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 994); <em><a href="#id256">backlink</a></em></p>
Unknown interpreted text role &quot;exc&quot;.</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 999)</p>
<p>Unknown directive type &quot;attribute&quot;.</p>
<pre class="literal-block">
.. attribute:: Option.action

   (default: ``&quot;store&quot;``)

   Determines :mod:`optparse`'s behaviour when this option is seen on the
   command line; the available options are documented :ref:`here
   &lt;optparse-standard-option-actions&gt;`.

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1007)</p>
<p>Unknown directive type &quot;attribute&quot;.</p>
<pre class="literal-block">
.. attribute:: Option.type

   (default: ``&quot;string&quot;``)

   The argument type expected by this option (e.g., ``&quot;string&quot;`` or ``&quot;int&quot;``);
   the available option types are documented :ref:`here
   &lt;optparse-standard-option-types&gt;`.

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1015)</p>
<p>Unknown directive type &quot;attribute&quot;.</p>
<pre class="literal-block">
.. attribute:: Option.dest

   (default: derived from option strings)

   If the option's action implies writing or modifying a value somewhere, this
   tells :mod:`optparse` where to write it: :attr:`~Option.dest` names an
   attribute of the ``options`` object that :mod:`optparse` builds as it parses
   the command line.

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1024)</p>
<p>Unknown directive type &quot;attribute&quot;.</p>
<pre class="literal-block">
.. attribute:: Option.default

   The value to use for this option's destination if the option is not seen on
   the command line.  See also :meth:`OptionParser.set_defaults`.

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1029)</p>
<p>Unknown directive type &quot;attribute&quot;.</p>
<pre class="literal-block">
.. attribute:: Option.nargs

   (default: 1)

   How many arguments of type :attr:`~Option.type` should be consumed when this
   option is seen.  If &gt; 1, :mod:`optparse` will store a tuple of values to
   :attr:`~Option.dest`.

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1037)</p>
<p>Unknown directive type &quot;attribute&quot;.</p>
<pre class="literal-block">
.. attribute:: Option.const

   For actions that store a constant value, the constant value to store.

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1041)</p>
<p>Unknown directive type &quot;attribute&quot;.</p>
<pre class="literal-block">
.. attribute:: Option.choices

   For options of type ``&quot;choice&quot;``, the list of strings the user may choose
   from.

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1046)</p>
<p>Unknown directive type &quot;attribute&quot;.</p>
<pre class="literal-block">
.. attribute:: Option.callback

   For options with action ``&quot;callback&quot;``, the callable to call when this option
   is seen.  See section :ref:`optparse-option-callbacks` for detail on the
   arguments passed to the callable.

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1052)</p>
<p>Unknown directive type &quot;attribute&quot;.</p>
<pre class="literal-block">
.. attribute:: Option.callback_args
               Option.callback_kwargs

   Additional positional and keyword arguments to pass to ``callback`` after the
   four standard callback arguments.

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1058)</p>
<p>Unknown directive type &quot;attribute&quot;.</p>
<pre class="literal-block">
.. attribute:: Option.help

   Help text to print for this option when listing all available options after
   the user supplies a :attr:`~Option.help` option (such as ``--help``).  If
   no help text is supplied, the option will be listed without help text.  To
   hide this option, use the special value :data:`optparse.SUPPRESS_HELP`.

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1065)</p>
<p>Unknown directive type &quot;attribute&quot;.</p>
<pre class="literal-block">
.. attribute:: Option.metavar

   (default: derived from option strings)

   Stand-in for the option argument(s) to use when printing help text.  See
   section :ref:`optparse-tutorial` for an example.


</pre>
</div>
</div>
<div class="section" id="standard-option-actions">
<span id="optparse-standard-option-actions"></span><h2>Standard option actions</h2>
<p>The various option actions all have slightly different requirements and effects.
Most actions have several relevant option attributes which you may specify to
guide <a href="#id257"><span class="problematic" id="id258">:mod:`optparse`</span></a>'s behaviour; a few have required attributes, which you
must specify for any option using that action.</p>
<div class="system-message" id="id257">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1078); <em><a href="#id258">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<ul>
<li><p class="first"><tt class="docutils literal">&quot;store&quot;</tt> [relevant: <a href="#id259"><span class="problematic" id="id260">:attr:`~Option.type`</span></a>, <a href="#id261"><span class="problematic" id="id262">:attr:`~Option.dest`</span></a>,
<a href="#id263"><span class="problematic" id="id264">:attr:`~Option.nargs`</span></a>, <a href="#id265"><span class="problematic" id="id266">:attr:`~Option.choices`</span></a>]</p>
<div class="system-message" id="id259">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1083); <em><a href="#id260">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id261">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1083); <em><a href="#id262">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id263">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1083); <em><a href="#id264">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id265">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1083); <em><a href="#id266">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<p>The option must be followed by an argument, which is converted to a value
according to <a href="#id267"><span class="problematic" id="id268">:attr:`~Option.type`</span></a> and stored in <a href="#id269"><span class="problematic" id="id270">:attr:`~Option.dest`</span></a>.  If
<a href="#id271"><span class="problematic" id="id272">:attr:`~Option.nargs`</span></a> &gt; 1, multiple arguments will be consumed from the
command line; all will be converted according to <a href="#id273"><span class="problematic" id="id274">:attr:`~Option.type`</span></a> and
stored to <a href="#id275"><span class="problematic" id="id276">:attr:`~Option.dest`</span></a> as a tuple.  See the
<a href="#id277"><span class="problematic" id="id278">:ref:`optparse-standard-option-types`</span></a> section.</p>
<div class="system-message" id="id267">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1086); <em><a href="#id268">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id269">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1086); <em><a href="#id270">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id271">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1086); <em><a href="#id272">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id273">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1086); <em><a href="#id274">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id275">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1086); <em><a href="#id276">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id277">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1086); <em><a href="#id278">backlink</a></em></p>
<p>Unknown interpreted text role &quot;ref&quot;.</p>
</div>
<p>If <a href="#id279"><span class="problematic" id="id280">:attr:`~Option.choices`</span></a> is supplied (a list or tuple of strings), the type
defaults to <tt class="docutils literal">&quot;choice&quot;</tt>.</p>
<div class="system-message" id="id279">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1093); <em><a href="#id280">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<p>If <a href="#id281"><span class="problematic" id="id282">:attr:`~Option.type`</span></a> is not supplied, it defaults to <tt class="docutils literal">&quot;string&quot;</tt>.</p>
<div class="system-message" id="id281">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1096); <em><a href="#id282">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<p>If <a href="#id283"><span class="problematic" id="id284">:attr:`~Option.dest`</span></a> is not supplied, <a href="#id285"><span class="problematic" id="id286">:mod:`optparse`</span></a> derives a destination
from the first long option string (e.g., <tt class="docutils literal"><span class="pre">--foo-bar</span></tt> implies
<tt class="docutils literal">foo_bar</tt>). If there are no long option strings, <a href="#id287"><span class="problematic" id="id288">:mod:`optparse`</span></a> derives a
destination from the first short option string (e.g., <tt class="docutils literal"><span class="pre">-f</span></tt> implies <tt class="docutils literal">f</tt>).</p>
<div class="system-message" id="id283">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1098); <em><a href="#id284">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id285">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1098); <em><a href="#id286">backlink</a></em></p>
<p>Unknown interpreted text role &quot;mod&quot;.</p>
</div>
<div class="system-message" id="id287">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1098); <em><a href="#id288">backlink</a></em></p>
<p>Unknown interpreted text role &quot;mod&quot;.</p>
</div>
<p>Example:</p>
<pre class="literal-block">
parser.add_option(&quot;-f&quot;)
parser.add_option(&quot;-p&quot;, type=&quot;float&quot;, nargs=3, dest=&quot;point&quot;)
</pre>
<p>As it parses the command line</p>
<pre class="literal-block">
-f foo.txt -p 1 -3.5 4 -fbar.txt
</pre>
<p><a href="#id289"><span class="problematic" id="id290">:mod:`optparse`</span></a> will set</p>
<div class="system-message" id="id289">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1112); <em><a href="#id290">backlink</a></em></p>
<p>Unknown interpreted text role &quot;mod&quot;.</p>
</div>
<pre class="literal-block">
options.f = &quot;foo.txt&quot;
options.point = (1.0, -3.5, 4.0)
options.f = &quot;bar.txt&quot;
</pre>
</li>
<li><p class="first"><tt class="docutils literal">&quot;store_const&quot;</tt> [required: <a href="#id291"><span class="problematic" id="id292">:attr:`~Option.const`</span></a>; relevant:
<a href="#id293"><span class="problematic" id="id294">:attr:`~Option.dest`</span></a>]</p>
<div class="system-message" id="id291">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1118); <em><a href="#id292">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id293">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1118); <em><a href="#id294">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<p>The value <a href="#id295"><span class="problematic" id="id296">:attr:`~Option.const`</span></a> is stored in <a href="#id297"><span class="problematic" id="id298">:attr:`~Option.dest`</span></a>.</p>
<div class="system-message" id="id295">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1121); <em><a href="#id296">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id297">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1121); <em><a href="#id298">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<p>Example:</p>
<pre class="literal-block">
parser.add_option(&quot;-q&quot;, &quot;--quiet&quot;,
                  action=&quot;store_const&quot;, const=0, dest=&quot;verbose&quot;)
parser.add_option(&quot;-v&quot;, &quot;--verbose&quot;,
                  action=&quot;store_const&quot;, const=1, dest=&quot;verbose&quot;)
parser.add_option(&quot;--noisy&quot;,
                  action=&quot;store_const&quot;, const=2, dest=&quot;verbose&quot;)
</pre>
<p>If <tt class="docutils literal"><span class="pre">--noisy</span></tt> is seen, <a href="#id299"><span class="problematic" id="id300">:mod:`optparse`</span></a> will set</p>
<div class="system-message" id="id299">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1132); <em><a href="#id300">backlink</a></em></p>
<p>Unknown interpreted text role &quot;mod&quot;.</p>
</div>
<pre class="literal-block">
options.verbose = 2
</pre>
</li>
<li><p class="first"><tt class="docutils literal">&quot;store_true&quot;</tt> [relevant: <a href="#id301"><span class="problematic" id="id302">:attr:`~Option.dest`</span></a>]</p>
<div class="system-message" id="id301">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1136); <em><a href="#id302">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<p>A special case of <tt class="docutils literal">&quot;store_const&quot;</tt> that stores <tt class="docutils literal">True</tt> to
<a href="#id303"><span class="problematic" id="id304">:attr:`~Option.dest`</span></a>.</p>
<div class="system-message" id="id303">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1138); <em><a href="#id304">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
</li>
<li><p class="first"><tt class="docutils literal">&quot;store_false&quot;</tt> [relevant: <a href="#id305"><span class="problematic" id="id306">:attr:`~Option.dest`</span></a>]</p>
<div class="system-message" id="id305">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1141); <em><a href="#id306">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<p>Like <tt class="docutils literal">&quot;store_true&quot;</tt>, but stores <tt class="docutils literal">False</tt>.</p>
<p>Example:</p>
<pre class="literal-block">
parser.add_option(&quot;--clobber&quot;, action=&quot;store_true&quot;, dest=&quot;clobber&quot;)
parser.add_option(&quot;--no-clobber&quot;, action=&quot;store_false&quot;, dest=&quot;clobber&quot;)
</pre>
</li>
<li><p class="first"><tt class="docutils literal">&quot;append&quot;</tt> [relevant: <a href="#id307"><span class="problematic" id="id308">:attr:`~Option.type`</span></a>, <a href="#id309"><span class="problematic" id="id310">:attr:`~Option.dest`</span></a>,
<a href="#id311"><span class="problematic" id="id312">:attr:`~Option.nargs`</span></a>, <a href="#id313"><span class="problematic" id="id314">:attr:`~Option.choices`</span></a>]</p>
<div class="system-message" id="id307">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1150); <em><a href="#id308">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id309">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1150); <em><a href="#id310">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id311">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1150); <em><a href="#id312">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id313">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1150); <em><a href="#id314">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<p>The option must be followed by an argument, which is appended to the list in
<a href="#id315"><span class="problematic" id="id316">:attr:`~Option.dest`</span></a>.  If no default value for <a href="#id317"><span class="problematic" id="id318">:attr:`~Option.dest`</span></a> is
supplied, an empty list is automatically created when <a href="#id319"><span class="problematic" id="id320">:mod:`optparse`</span></a> first
encounters this option on the command-line.  If <a href="#id321"><span class="problematic" id="id322">:attr:`~Option.nargs`</span></a> &gt; 1,
multiple arguments are consumed, and a tuple of length <a href="#id323"><span class="problematic" id="id324">:attr:`~Option.nargs`</span></a>
is appended to <a href="#id325"><span class="problematic" id="id326">:attr:`~Option.dest`</span></a>.</p>
<div class="system-message" id="id315">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1153); <em><a href="#id316">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id317">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1153); <em><a href="#id318">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id319">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1153); <em><a href="#id320">backlink</a></em></p>
<p>Unknown interpreted text role &quot;mod&quot;.</p>
</div>
<div class="system-message" id="id321">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1153); <em><a href="#id322">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id323">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1153); <em><a href="#id324">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id325">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1153); <em><a href="#id326">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<p>The defaults for <a href="#id327"><span class="problematic" id="id328">:attr:`~Option.type`</span></a> and <a href="#id329"><span class="problematic" id="id330">:attr:`~Option.dest`</span></a> are the same as
for the <tt class="docutils literal">&quot;store&quot;</tt> action.</p>
<div class="system-message" id="id327">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1160); <em><a href="#id328">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id329">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1160); <em><a href="#id330">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<p>Example:</p>
<pre class="literal-block">
parser.add_option(&quot;-t&quot;, &quot;--tracks&quot;, action=&quot;append&quot;, type=&quot;int&quot;)
</pre>
<p>If <tt class="docutils literal"><span class="pre">-t3</span></tt> is seen on the command-line, <a href="#id331"><span class="problematic" id="id332">:mod:`optparse`</span></a> does the equivalent
of:</p>
<div class="system-message" id="id331">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1167); <em><a href="#id332">backlink</a></em></p>
<p>Unknown interpreted text role &quot;mod&quot;.</p>
</div>
<pre class="literal-block">
options.tracks = []
options.tracks.append(int(&quot;3&quot;))
</pre>
<p>If, a little later on, <tt class="docutils literal"><span class="pre">--tracks=4</span></tt> is seen, it does:</p>
<pre class="literal-block">
options.tracks.append(int(&quot;4&quot;))
</pre>
<p>The <tt class="docutils literal">append</tt> action calls the <tt class="docutils literal">append</tt> method on the current value of the
option.  This means that any default value specified must have an <tt class="docutils literal">append</tt>
method.  It also means that if the default value is non-empty, the default
elements will be present in the parsed value for the option, with any values
from the command line appended after those default values:</p>
<pre class="literal-block">
&gt;&gt;&gt; parser.add_option(&quot;--files&quot;, action=&quot;append&quot;, default=['~/.mypkg/defaults'])
&gt;&gt;&gt; opts, args = parser.parse_args(['--files', 'overrides.mypkg'])
&gt;&gt;&gt; opts.files
['~/.mypkg/defaults', 'overrides.mypkg']
</pre>
</li>
<li><p class="first"><tt class="docutils literal">&quot;append_const&quot;</tt> [required: <a href="#id333"><span class="problematic" id="id334">:attr:`~Option.const`</span></a>; relevant:
<a href="#id335"><span class="problematic" id="id336">:attr:`~Option.dest`</span></a>]</p>
<div class="system-message" id="id333">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1188); <em><a href="#id334">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id335">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1188); <em><a href="#id336">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<p>Like <tt class="docutils literal">&quot;store_const&quot;</tt>, but the value <a href="#id337"><span class="problematic" id="id338">:attr:`~Option.const`</span></a> is appended to
<a href="#id339"><span class="problematic" id="id340">:attr:`~Option.dest`</span></a>; as with <tt class="docutils literal">&quot;append&quot;</tt>, <a href="#id341"><span class="problematic" id="id342">:attr:`~Option.dest`</span></a> defaults to
<tt class="docutils literal">None</tt>, and an empty list is automatically created the first time the option
is encountered.</p>
<div class="system-message" id="id337">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1191); <em><a href="#id338">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id339">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1191); <em><a href="#id340">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id341">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1191); <em><a href="#id342">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
</li>
<li><p class="first"><tt class="docutils literal">&quot;count&quot;</tt> [relevant: <a href="#id343"><span class="problematic" id="id344">:attr:`~Option.dest`</span></a>]</p>
<div class="system-message" id="id343">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1196); <em><a href="#id344">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<p>Increment the integer stored at <a href="#id345"><span class="problematic" id="id346">:attr:`~Option.dest`</span></a>.  If no default value is
supplied, <a href="#id347"><span class="problematic" id="id348">:attr:`~Option.dest`</span></a> is set to zero before being incremented the
first time.</p>
<div class="system-message" id="id345">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1198); <em><a href="#id346">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id347">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1198); <em><a href="#id348">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<p>Example:</p>
<pre class="literal-block">
parser.add_option(&quot;-v&quot;, action=&quot;count&quot;, dest=&quot;verbosity&quot;)
</pre>
<p>The first time <tt class="docutils literal"><span class="pre">-v</span></tt> is seen on the command line, <a href="#id349"><span class="problematic" id="id350">:mod:`optparse`</span></a> does the
equivalent of:</p>
<div class="system-message" id="id349">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1206); <em><a href="#id350">backlink</a></em></p>
<p>Unknown interpreted text role &quot;mod&quot;.</p>
</div>
<pre class="literal-block">
options.verbosity = 0
options.verbosity += 1
</pre>
<p>Every subsequent occurrence of <tt class="docutils literal"><span class="pre">-v</span></tt> results in</p>
<pre class="literal-block">
options.verbosity += 1
</pre>
</li>
<li><p class="first"><tt class="docutils literal">&quot;callback&quot;</tt> [required: <a href="#id351"><span class="problematic" id="id352">:attr:`~Option.callback`</span></a>; relevant:
<a href="#id353"><span class="problematic" id="id354">:attr:`~Option.type`</span></a>, <a href="#id355"><span class="problematic" id="id356">:attr:`~Option.nargs`</span></a>, <a href="#id357"><span class="problematic" id="id358">:attr:`~Option.callback_args`</span></a>,
<a href="#id359"><span class="problematic" id="id360">:attr:`~Option.callback_kwargs`</span></a>]</p>
<div class="system-message" id="id351">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1216); <em><a href="#id352">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id353">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1216); <em><a href="#id354">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id355">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1216); <em><a href="#id356">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id357">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1216); <em><a href="#id358">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id359">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1216); <em><a href="#id360">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<p>Call the function specified by <a href="#id361"><span class="problematic" id="id362">:attr:`~Option.callback`</span></a>, which is called as</p>
<div class="system-message" id="id361">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1220); <em><a href="#id362">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<pre class="literal-block">
func(option, opt_str, value, parser, *args, **kwargs)
</pre>
<p>See section <a href="#id363"><span class="problematic" id="id364">:ref:`optparse-option-callbacks`</span></a> for more detail.</p>
<div class="system-message" id="id363">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1224); <em><a href="#id364">backlink</a></em></p>
<p>Unknown interpreted text role &quot;ref&quot;.</p>
</div>
</li>
<li><p class="first"><tt class="docutils literal">&quot;help&quot;</tt></p>
<p>Prints a complete help message for all the options in the current option
parser.  The help message is constructed from the <tt class="docutils literal">usage</tt> string passed to
OptionParser's constructor and the <a href="#id365"><span class="problematic" id="id366">:attr:`~Option.help`</span></a> string passed to every
option.</p>
<div class="system-message" id="id365">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1228); <em><a href="#id366">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<p>If no <a href="#id367"><span class="problematic" id="id368">:attr:`~Option.help`</span></a> string is supplied for an option, it will still be
listed in the help message.  To omit an option entirely, use the special value
<a href="#id369"><span class="problematic" id="id370">:data:`optparse.SUPPRESS_HELP`</span></a>.</p>
<div class="system-message" id="id367">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1233); <em><a href="#id368">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id369">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1233); <em><a href="#id370">backlink</a></em></p>
<p>Unknown interpreted text role &quot;data&quot;.</p>
</div>
<p><a href="#id371"><span class="problematic" id="id372">:mod:`optparse`</span></a> automatically adds a <a href="#id373"><span class="problematic" id="id374">:attr:`~Option.help`</span></a> option to all
OptionParsers, so you do not normally need to create one.</p>
<div class="system-message" id="id371">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1237); <em><a href="#id372">backlink</a></em></p>
<p>Unknown interpreted text role &quot;mod&quot;.</p>
</div>
<div class="system-message" id="id373">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1237); <em><a href="#id374">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<p>Example:</p>
<pre class="literal-block">
from optparse import OptionParser, SUPPRESS_HELP

# usually, a help option is added automatically, but that can
# be suppressed using the add_help_option argument
parser = OptionParser(add_help_option=False)

parser.add_option(&quot;-h&quot;, &quot;--help&quot;, action=&quot;help&quot;)
parser.add_option(&quot;-v&quot;, action=&quot;store_true&quot;, dest=&quot;verbose&quot;,
                  help=&quot;Be moderately verbose&quot;)
parser.add_option(&quot;--file&quot;, dest=&quot;filename&quot;,
                  help=&quot;Input file to read data from&quot;)
parser.add_option(&quot;--secret&quot;, help=SUPPRESS_HELP)
</pre>
<p>If <a href="#id375"><span class="problematic" id="id376">:mod:`optparse`</span></a> sees either <tt class="docutils literal"><span class="pre">-h</span></tt> or <tt class="docutils literal"><span class="pre">--help</span></tt> on the command line,
it will print something like the following help message to stdout (assuming
<tt class="docutils literal">sys.argv[0]</tt> is <tt class="docutils literal">&quot;foo.py&quot;</tt>):</p>
<div class="system-message" id="id375">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1255); <em><a href="#id376">backlink</a></em></p>
<p>Unknown interpreted text role &quot;mod&quot;.</p>
</div>
<pre class="code text literal-block">
Usage: foo.py [options]

Options:
  -h, --help        Show this help message and exit
  -v                Be moderately verbose
  --file=FILENAME   Input file to read data from
</pre>
<p>After printing the help message, <a href="#id377"><span class="problematic" id="id378">:mod:`optparse`</span></a> terminates your process with
<tt class="docutils literal">sys.exit(0)</tt>.</p>
<div class="system-message" id="id377">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1268); <em><a href="#id378">backlink</a></em></p>
<p>Unknown interpreted text role &quot;mod&quot;.</p>
</div>
</li>
<li><p class="first"><tt class="docutils literal">&quot;version&quot;</tt></p>
<p>Prints the version number supplied to the OptionParser to stdout and exits.
The version number is actually formatted and printed by the
<tt class="docutils literal">print_version()</tt> method of OptionParser.  Generally only relevant if the
<tt class="docutils literal">version</tt> argument is supplied to the OptionParser constructor.  As with
<a href="#id379"><span class="problematic" id="id380">:attr:`~Option.help`</span></a> options, you will rarely create <tt class="docutils literal">version</tt> options,
since <a href="#id381"><span class="problematic" id="id382">:mod:`optparse`</span></a> automatically adds them when needed.</p>
<div class="system-message" id="id379">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1273); <em><a href="#id380">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id381">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1273); <em><a href="#id382">backlink</a></em></p>
<p>Unknown interpreted text role &quot;mod&quot;.</p>
</div>
</li>
</ul>
</div>
<div class="section" id="standard-option-types">
<span id="optparse-standard-option-types"></span><h2>Standard option types</h2>
<p><a href="#id383"><span class="problematic" id="id384">:mod:`optparse`</span></a> has five built-in option types: <tt class="docutils literal">&quot;string&quot;</tt>, <tt class="docutils literal">&quot;int&quot;</tt>,
<tt class="docutils literal">&quot;choice&quot;</tt>, <tt class="docutils literal">&quot;float&quot;</tt> and <tt class="docutils literal">&quot;complex&quot;</tt>.  If you need to add new
option types, see section <a href="#id385"><span class="problematic" id="id386">:ref:`optparse-extending-optparse`</span></a>.</p>
<div class="system-message" id="id383">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1286); <em><a href="#id384">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id385">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1286); <em><a href="#id386">backlink</a></em></p>
Unknown interpreted text role &quot;ref&quot;.</div>
<p>Arguments to string options are not checked or converted in any way: the text on
the command line is stored in the destination (or passed to the callback) as-is.</p>
<p>Integer arguments (type <tt class="docutils literal">&quot;int&quot;</tt>) are parsed as follows:</p>
<ul class="simple">
<li>if the number starts with <tt class="docutils literal">0x</tt>, it is parsed as a hexadecimal number</li>
<li>if the number starts with <tt class="docutils literal">0</tt>, it is parsed as an octal number</li>
<li>if the number starts with <tt class="docutils literal">0b</tt>, it is parsed as a binary number</li>
<li>otherwise, the number is parsed as a decimal number</li>
</ul>
<p>The conversion is done by calling <a href="#id387"><span class="problematic" id="id388">:func:`int`</span></a> with the appropriate base (2, 8,
10, or 16).  If this fails, so will <a href="#id389"><span class="problematic" id="id390">:mod:`optparse`</span></a>, although with a more useful
error message.</p>
<div class="system-message" id="id387">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1304); <em><a href="#id388">backlink</a></em></p>
Unknown interpreted text role &quot;func&quot;.</div>
<div class="system-message" id="id389">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1304); <em><a href="#id390">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<p><tt class="docutils literal">&quot;float&quot;</tt> and <tt class="docutils literal">&quot;complex&quot;</tt> option arguments are converted directly with
<a href="#id391"><span class="problematic" id="id392">:func:`float`</span></a> and <a href="#id393"><span class="problematic" id="id394">:func:`complex`</span></a>, with similar error-handling.</p>
<div class="system-message" id="id391">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1308); <em><a href="#id392">backlink</a></em></p>
Unknown interpreted text role &quot;func&quot;.</div>
<div class="system-message" id="id393">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1308); <em><a href="#id394">backlink</a></em></p>
Unknown interpreted text role &quot;func&quot;.</div>
<p><tt class="docutils literal">&quot;choice&quot;</tt> options are a subtype of <tt class="docutils literal">&quot;string&quot;</tt> options.  The
<a href="#id395"><span class="problematic" id="id396">:attr:`~Option.choices`</span></a> option attribute (a sequence of strings) defines the
set of allowed option arguments.  <a href="#id397"><span class="problematic" id="id398">:func:`optparse.check_choice`</span></a> compares
user-supplied option arguments against this master list and raises
<a href="#id399"><span class="problematic" id="id400">:exc:`OptionValueError`</span></a> if an invalid string is given.</p>
<div class="system-message" id="id395">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1311); <em><a href="#id396">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<div class="system-message" id="id397">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1311); <em><a href="#id398">backlink</a></em></p>
Unknown interpreted text role &quot;func&quot;.</div>
<div class="system-message" id="id399">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1311); <em><a href="#id400">backlink</a></em></p>
Unknown interpreted text role &quot;exc&quot;.</div>
</div>
<div class="section" id="parsing-arguments">
<span id="optparse-parsing-arguments"></span><h2>Parsing arguments</h2>
<p>The whole point of creating and populating an OptionParser is to call its
<a href="#id401"><span class="problematic" id="id402">:meth:`parse_args`</span></a> method:</p>
<div class="system-message" id="id401">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1323); <em><a href="#id402">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<pre class="literal-block">
(options, args) = parser.parse_args(args=None, values=None)
</pre>
<p>where the input parameters are</p>
<dl class="docutils">
<dt><tt class="docutils literal">args</tt></dt>
<dd>the list of arguments to process (default: <tt class="docutils literal">sys.argv[1:]</tt>)</dd>
<dt><tt class="docutils literal">values</tt></dt>
<dd><p class="first">an <a href="#id403"><span class="problematic" id="id404">:class:`optparse.Values`</span></a> object to store option arguments in (default: a
new instance of <a href="#id405"><span class="problematic" id="id406">:class:`Values`</span></a>) -- if you give an existing object, the
option defaults will not be initialized on it</p>
<div class="system-message" id="id403">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1334); <em><a href="#id404">backlink</a></em></p>
Unknown interpreted text role &quot;class&quot;.</div>
<div class="last system-message" id="id405">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1334); <em><a href="#id406">backlink</a></em></p>
Unknown interpreted text role &quot;class&quot;.</div>
</dd>
</dl>
<p>and the return values are</p>
<dl class="docutils">
<dt><tt class="docutils literal">options</tt></dt>
<dd><p class="first">the same object that was passed in as <tt class="docutils literal">values</tt>, or the optparse.Values
instance created by <a href="#id407"><span class="problematic" id="id408">:mod:`optparse`</span></a></p>
<div class="last system-message" id="id407">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1341); <em><a href="#id408">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
</dd>
<dt><tt class="docutils literal">args</tt></dt>
<dd>the leftover positional arguments after all options have been processed</dd>
</dl>
<p>The most common usage is to supply neither keyword argument.  If you supply
<tt class="docutils literal">values</tt>, it will be modified with repeated <a href="#id409"><span class="problematic" id="id410">:func:`setattr`</span></a> calls (roughly one
for every option argument stored to an option destination) and returned by
<a href="#id411"><span class="problematic" id="id412">:meth:`parse_args`</span></a>.</p>
<div class="system-message" id="id409">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1347); <em><a href="#id410">backlink</a></em></p>
Unknown interpreted text role &quot;func&quot;.</div>
<div class="system-message" id="id411">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1347); <em><a href="#id412">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<p>If <a href="#id413"><span class="problematic" id="id414">:meth:`parse_args`</span></a> encounters any errors in the argument list, it calls the
OptionParser's <a href="#id415"><span class="problematic" id="id416">:meth:`error`</span></a> method with an appropriate end-user error message.
This ultimately terminates your process with an exit status of 2 (the
traditional Unix exit status for command-line errors).</p>
<div class="system-message" id="id413">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1352); <em><a href="#id414">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<div class="system-message" id="id415">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1352); <em><a href="#id416">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
</div>
<div class="section" id="querying-and-manipulating-your-option-parser">
<span id="optparse-querying-manipulating-option-parser"></span><h2>Querying and manipulating your option parser</h2>
<p>The default behavior of the option parser can be customized slightly, and you
can also poke around your option parser and see what's there.  OptionParser
provides several methods to help you out:</p>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1367)</p>
<p>Unknown directive type &quot;method&quot;.</p>
<pre class="literal-block">
.. method:: OptionParser.disable_interspersed_args()

   Set parsing to stop on the first non-option.  For example, if ``-a`` and
   ``-b`` are both simple options that take no arguments, :mod:`optparse`
   normally accepts this syntax::

      prog -a arg1 -b arg2

   and treats it as equivalent to  ::

      prog -a -b arg1 arg2

   To disable this feature, call :meth:`disable_interspersed_args`.  This
   restores traditional Unix syntax, where option parsing stops with the first
   non-option argument.

   Use this if you have a command processor which runs another command which has
   options of its own and you want to make sure these options don't get
   confused.  For example, each command might have a different set of options.

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1387)</p>
<p>Unknown directive type &quot;method&quot;.</p>
<pre class="literal-block">
.. method:: OptionParser.enable_interspersed_args()

   Set parsing to not stop on the first non-option, allowing interspersing
   switches with command arguments.  This is the default behavior.

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1392)</p>
<p>Unknown directive type &quot;method&quot;.</p>
<pre class="literal-block">
.. method:: OptionParser.get_option(opt_str)

   Returns the Option instance with the option string *opt_str*, or ``None`` if
   no options have that option string.

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1397)</p>
<p>Unknown directive type &quot;method&quot;.</p>
<pre class="literal-block">
.. method:: OptionParser.has_option(opt_str)

   Return ``True`` if the OptionParser has an option with option string *opt_str*
   (e.g., ``-q`` or ``--verbose``).

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1402)</p>
<p>Unknown directive type &quot;method&quot;.</p>
<pre class="literal-block">
.. method:: OptionParser.remove_option(opt_str)

   If the :class:`OptionParser` has an option corresponding to *opt_str*, that
   option is removed.  If that option provided any other option strings, all of
   those option strings become invalid. If *opt_str* does not occur in any
   option belonging to this :class:`OptionParser`, raises :exc:`ValueError`.


</pre>
</div>
</div>
<div class="section" id="conflicts-between-options">
<span id="optparse-conflicts-between-options"></span><h2>Conflicts between options</h2>
<p>If you're not careful, it's easy to define options with conflicting option
strings:</p>
<pre class="literal-block">
parser.add_option(&quot;-n&quot;, &quot;--dry-run&quot;, ...)
...
parser.add_option(&quot;-n&quot;, &quot;--noisy&quot;, ...)
</pre>
<p>(This is particularly true if you've defined your own OptionParser subclass with
some standard options.)</p>
<p>Every time you add an option, <a href="#id417"><span class="problematic" id="id418">:mod:`optparse`</span></a> checks for conflicts with existing
options.  If it finds any, it invokes the current conflict-handling mechanism.
You can set the conflict-handling mechanism either in the constructor:</p>
<div class="system-message" id="id417">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1425); <em><a href="#id418">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<pre class="literal-block">
parser = OptionParser(..., conflict_handler=handler)
</pre>
<p>or with a separate call:</p>
<pre class="literal-block">
parser.set_conflict_handler(handler)
</pre>
<p>The available conflict handlers are:</p>
<blockquote>
<dl class="docutils">
<dt><tt class="docutils literal">&quot;error&quot;</tt> (default)</dt>
<dd><p class="first">assume option conflicts are a programming error and raise
<a href="#id419"><span class="problematic" id="id420">:exc:`OptionConflictError`</span></a></p>
<div class="last system-message" id="id419">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1438); <em><a href="#id420">backlink</a></em></p>
Unknown interpreted text role &quot;exc&quot;.</div>
</dd>
<dt><tt class="docutils literal">&quot;resolve&quot;</tt></dt>
<dd>resolve option conflicts intelligently (see below)</dd>
</dl>
</blockquote>
<p>As an example, let's define an <a href="#id421"><span class="problematic" id="id422">:class:`OptionParser`</span></a> that resolves conflicts
intelligently and add conflicting options to it:</p>
<div class="system-message" id="id421">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1445); <em><a href="#id422">backlink</a></em></p>
Unknown interpreted text role &quot;class&quot;.</div>
<pre class="literal-block">
parser = OptionParser(conflict_handler=&quot;resolve&quot;)
parser.add_option(&quot;-n&quot;, &quot;--dry-run&quot;, ..., help=&quot;do no harm&quot;)
parser.add_option(&quot;-n&quot;, &quot;--noisy&quot;, ..., help=&quot;be noisy&quot;)
</pre>
<p>At this point, <a href="#id423"><span class="problematic" id="id424">:mod:`optparse`</span></a> detects that a previously-added option is already
using the <tt class="docutils literal"><span class="pre">-n</span></tt> option string.  Since <tt class="docutils literal">conflict_handler</tt> is <tt class="docutils literal">&quot;resolve&quot;</tt>,
it resolves the situation by removing <tt class="docutils literal"><span class="pre">-n</span></tt> from the earlier option's list of
option strings.  Now <tt class="docutils literal"><span class="pre">--dry-run</span></tt> is the only way for the user to activate
that option.  If the user asks for help, the help message will reflect that:</p>
<div class="system-message" id="id423">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1452); <em><a href="#id424">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<pre class="literal-block">
Options:
  --dry-run     do no harm
  ...
  -n, --noisy   be noisy
</pre>
<p>It's possible to whittle away the option strings for a previously-added option
until there are none left, and the user has no way of invoking that option from
the command-line.  In that case, <a href="#id425"><span class="problematic" id="id426">:mod:`optparse`</span></a> removes that option completely,
so it doesn't show up in help text or anywhere else. Carrying on with our
existing OptionParser:</p>
<div class="system-message" id="id425">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1463); <em><a href="#id426">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<pre class="literal-block">
parser.add_option(&quot;--dry-run&quot;, ..., help=&quot;new dry-run option&quot;)
</pre>
<p>At this point, the original <tt class="docutils literal"><span class="pre">-n</span></tt>/<tt class="docutils literal"><span class="pre">--dry-run</span></tt> option is no longer
accessible, so <a href="#id427"><span class="problematic" id="id428">:mod:`optparse`</span></a> removes it, leaving this help text:</p>
<div class="system-message" id="id427">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1471); <em><a href="#id428">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<pre class="literal-block">
Options:
  ...
  -n, --noisy   be noisy
  --dry-run     new dry-run option
</pre>
</div>
<div class="section" id="cleanup">
<span id="optparse-cleanup"></span><h2>Cleanup</h2>
<p>OptionParser instances have several cyclic references.  This should not be a
problem for Python's garbage collector, but you may wish to break the cyclic
references explicitly by calling <a href="#id429"><span class="problematic" id="id430">:meth:`~OptionParser.destroy`</span></a> on your
OptionParser once you are done with it.  This is particularly useful in
long-running applications where large object graphs are reachable from your
OptionParser.</p>
<div class="system-message" id="id429">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1485); <em><a href="#id430">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
</div>
<div class="section" id="other-methods">
<span id="optparse-other-methods"></span><h2>Other methods</h2>
<p>OptionParser supports several other public methods:</p>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1500)</p>
<p>Unknown directive type &quot;method&quot;.</p>
<pre class="literal-block">
.. method:: OptionParser.set_usage(usage)

   Set the usage string according to the rules described above for the ``usage``
   constructor keyword argument.  Passing ``None`` sets the default usage
   string; use :data:`optparse.SUPPRESS_USAGE` to suppress a usage message.

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1506)</p>
<p>Unknown directive type &quot;method&quot;.</p>
<pre class="literal-block">
.. method:: OptionParser.print_usage(file=None)

   Print the usage message for the current program (``self.usage``) to *file*
   (default stdout).  Any occurrence of the string ``%prog`` in ``self.usage``
   is replaced with the name of the current program.  Does nothing if
   ``self.usage`` is empty or not defined.

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1513)</p>
<p>Unknown directive type &quot;method&quot;.</p>
<pre class="literal-block">
.. method:: OptionParser.get_usage()

   Same as :meth:`print_usage` but returns the usage string instead of
   printing it.

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1518)</p>
<p>Unknown directive type &quot;method&quot;.</p>
<pre class="literal-block">
.. method:: OptionParser.set_defaults(dest=value, ...)

   Set default values for several option destinations at once.  Using
   :meth:`set_defaults` is the preferred way to set default values for options,
   since multiple options can share the same destination.  For example, if
   several &quot;mode&quot; options all set the same destination, any one of them can set
   the default, and the last one wins::

      parser.add_option(&quot;--advanced&quot;, action=&quot;store_const&quot;,
                        dest=&quot;mode&quot;, const=&quot;advanced&quot;,
                        default=&quot;novice&quot;)    # overridden below
      parser.add_option(&quot;--novice&quot;, action=&quot;store_const&quot;,
                        dest=&quot;mode&quot;, const=&quot;novice&quot;,
                        default=&quot;advanced&quot;)  # overrides above setting

   To avoid this confusion, use :meth:`set_defaults`::

      parser.set_defaults(mode=&quot;advanced&quot;)
      parser.add_option(&quot;--advanced&quot;, action=&quot;store_const&quot;,
                        dest=&quot;mode&quot;, const=&quot;advanced&quot;)
      parser.add_option(&quot;--novice&quot;, action=&quot;store_const&quot;,
                        dest=&quot;mode&quot;, const=&quot;novice&quot;)


</pre>
</div>
</div>
</div>
<div class="section" id="option-callbacks">
<span id="optparse-option-callbacks"></span><h1>Option Callbacks</h1>
<p>When <a href="#id431"><span class="problematic" id="id432">:mod:`optparse`</span></a>'s built-in actions and types aren't quite enough for your
needs, you have two choices: extend <a href="#id433"><span class="problematic" id="id434">:mod:`optparse`</span></a> or define a callback option.
Extending <a href="#id435"><span class="problematic" id="id436">:mod:`optparse`</span></a> is more general, but overkill for a lot of simple
cases.  Quite often a simple callback is all you need.</p>
<div class="system-message" id="id431">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1547); <em><a href="#id432">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id433">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1547); <em><a href="#id434">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id435">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1547); <em><a href="#id436">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<p>There are two steps to defining a callback option:</p>
<ul class="simple">
<li>define the option itself using the <tt class="docutils literal">&quot;callback&quot;</tt> action</li>
<li>write the callback; this is a function (or method) that takes at least four
arguments, as described below</li>
</ul>
<div class="section" id="defining-a-callback-option">
<span id="optparse-defining-callback-option"></span><h2>Defining a callback option</h2>
<p>As always, the easiest way to define a callback option is by using the
<a href="#id437"><span class="problematic" id="id438">:meth:`OptionParser.add_option`</span></a> method.  Apart from <a href="#id439"><span class="problematic" id="id440">:attr:`~Option.action`</span></a>, the
only option attribute you must specify is <tt class="docutils literal">callback</tt>, the function to call:</p>
<div class="system-message" id="id437">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1565); <em><a href="#id438">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<div class="system-message" id="id439">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1565); <em><a href="#id440">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<pre class="literal-block">
parser.add_option(&quot;-c&quot;, action=&quot;callback&quot;, callback=my_callback)
</pre>
<p><tt class="docutils literal">callback</tt> is a function (or other callable object), so you must have already
defined <tt class="docutils literal">my_callback()</tt> when you create this callback option. In this simple
case, <a href="#id441"><span class="problematic" id="id442">:mod:`optparse`</span></a> doesn't even know if <tt class="docutils literal"><span class="pre">-c</span></tt> takes any arguments,
which usually means that the option takes no arguments---the mere presence of
<tt class="docutils literal"><span class="pre">-c</span></tt> on the command-line is all it needs to know.  In some
circumstances, though, you might want your callback to consume an arbitrary
number of command-line arguments.  This is where writing callbacks gets tricky;
it's covered later in this section.</p>
<div class="system-message" id="id441">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1571); <em><a href="#id442">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<p><a href="#id443"><span class="problematic" id="id444">:mod:`optparse`</span></a> always passes four particular arguments to your callback, and it
will only pass additional arguments if you specify them via
<a href="#id445"><span class="problematic" id="id446">:attr:`~Option.callback_args`</span></a> and <a href="#id447"><span class="problematic" id="id448">:attr:`~Option.callback_kwargs`</span></a>.  Thus, the
minimal callback function signature is:</p>
<div class="system-message" id="id443">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1580); <em><a href="#id444">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id445">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1580); <em><a href="#id446">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<div class="system-message" id="id447">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1580); <em><a href="#id448">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<pre class="literal-block">
def my_callback(option, opt, value, parser):
</pre>
<p>The four arguments to a callback are described below.</p>
<p>There are several other option attributes that you can supply when you define a
callback option:</p>
<dl class="docutils">
<dt><a href="#id449"><span class="problematic" id="id450">:attr:`~Option.type`</span></a></dt>
<dd><div class="first system-message" id="id449">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1596); <em><a href="#id450">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<p>has its usual meaning: as with the <tt class="docutils literal">&quot;store&quot;</tt> or <tt class="docutils literal">&quot;append&quot;</tt> actions, it
instructs <a href="#id451"><span class="problematic" id="id452">:mod:`optparse`</span></a> to consume one argument and convert it to
<a href="#id453"><span class="problematic" id="id454">:attr:`~Option.type`</span></a>.  Rather than storing the converted value(s) anywhere,
though, <a href="#id455"><span class="problematic" id="id456">:mod:`optparse`</span></a> passes it to your callback function.</p>
<div class="system-message" id="id451">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1593); <em><a href="#id452">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id453">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1593); <em><a href="#id454">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<div class="last system-message" id="id455">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1593); <em><a href="#id456">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
</dd>
<dt><a href="#id457"><span class="problematic" id="id458">:attr:`~Option.nargs`</span></a></dt>
<dd><div class="first system-message" id="id457">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1602); <em><a href="#id458">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<p>also has its usual meaning: if it is supplied and &gt; 1, <a href="#id459"><span class="problematic" id="id460">:mod:`optparse`</span></a> will
consume <a href="#id461"><span class="problematic" id="id462">:attr:`~Option.nargs`</span></a> arguments, each of which must be convertible to
<a href="#id463"><span class="problematic" id="id464">:attr:`~Option.type`</span></a>.  It then passes a tuple of converted values to your
callback.</p>
<div class="system-message" id="id459">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1599); <em><a href="#id460">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id461">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1599); <em><a href="#id462">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<div class="last system-message" id="id463">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1599); <em><a href="#id464">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
</dd>
<dt><a href="#id465"><span class="problematic" id="id466">:attr:`~Option.callback_args`</span></a></dt>
<dd><div class="first system-message" id="id465">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1605); <em><a href="#id466">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<p class="last">a tuple of extra positional arguments to pass to the callback</p>
</dd>
<dt><a href="#id467"><span class="problematic" id="id468">:attr:`~Option.callback_kwargs`</span></a></dt>
<dd><div class="first system-message" id="id467">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1609); <em><a href="#id468">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<p class="last">a dictionary of extra keyword arguments to pass to the callback</p>
</dd>
</dl>
</div>
<div class="section" id="how-callbacks-are-called">
<span id="optparse-how-callbacks-called"></span><h2>How callbacks are called</h2>
<p>All callbacks are called as follows:</p>
<pre class="literal-block">
func(option, opt_str, value, parser, *args, **kwargs)
</pre>
<p>where</p>
<dl class="docutils">
<dt><tt class="docutils literal">option</tt></dt>
<dd>is the Option instance that's calling the callback</dd>
<dt><tt class="docutils literal">opt_str</tt></dt>
<dd>is the option string seen on the command-line that's triggering the callback.
(If an abbreviated long option was used, <tt class="docutils literal">opt_str</tt> will be the full,
canonical option string---e.g. if the user puts <tt class="docutils literal"><span class="pre">--foo</span></tt> on the
command-line as an abbreviation for <tt class="docutils literal"><span class="pre">--foobar</span></tt>, then <tt class="docutils literal">opt_str</tt> will be
<tt class="docutils literal"><span class="pre">&quot;--foobar&quot;</span></tt>.)</dd>
<dt><tt class="docutils literal">value</tt></dt>
<dd><p class="first">is the argument to this option seen on the command-line.  <a href="#id469"><span class="problematic" id="id470">:mod:`optparse`</span></a> will
only expect an argument if <a href="#id471"><span class="problematic" id="id472">:attr:`~Option.type`</span></a> is set; the type of <tt class="docutils literal">value</tt> will be
the type implied by the option's type.  If <a href="#id473"><span class="problematic" id="id474">:attr:`~Option.type`</span></a> for this option is
<tt class="docutils literal">None</tt> (no argument expected), then <tt class="docutils literal">value</tt> will be <tt class="docutils literal">None</tt>.  If <a href="#id475"><span class="problematic" id="id476">:attr:`~Option.nargs`</span></a>
&gt; 1, <tt class="docutils literal">value</tt> will be a tuple of values of the appropriate type.</p>
<div class="system-message" id="id469">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1633); <em><a href="#id470">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id471">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1633); <em><a href="#id472">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<div class="system-message" id="id473">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1633); <em><a href="#id474">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<div class="last system-message" id="id475">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1633); <em><a href="#id476">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
</dd>
<dt><tt class="docutils literal">parser</tt></dt>
<dd><p class="first">is the OptionParser instance driving the whole thing, mainly useful because
you can access some other interesting data through its instance attributes:</p>
<dl class="last docutils">
<dt><tt class="docutils literal">parser.largs</tt></dt>
<dd><p class="first">the current list of leftover arguments, ie. arguments that have been
consumed but are neither options nor option arguments. Feel free to modify
<tt class="docutils literal">parser.largs</tt>, e.g. by adding more arguments to it.  (This list will
become <tt class="docutils literal">args</tt>, the second return value of <a href="#id477"><span class="problematic" id="id478">:meth:`parse_args`</span></a>.)</p>
<div class="last system-message" id="id477">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1644); <em><a href="#id478">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
</dd>
<dt><tt class="docutils literal">parser.rargs</tt></dt>
<dd>the current list of remaining arguments, ie. with <tt class="docutils literal">opt_str</tt> and
<tt class="docutils literal">value</tt> (if applicable) removed, and only the arguments following them
still there.  Feel free to modify <tt class="docutils literal">parser.rargs</tt>, e.g. by consuming more
arguments.</dd>
<dt><tt class="docutils literal">parser.values</tt></dt>
<dd><p class="first">the object where option values are by default stored (an instance of
optparse.OptionValues).  This lets callbacks use the same mechanism as the
rest of <a href="#id479"><span class="problematic" id="id480">:mod:`optparse`</span></a> for storing option values; you don't need to mess
around with globals or closures.  You can also access or modify the
value(s) of any options already encountered on the command-line.</p>
<div class="last system-message" id="id479">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1656); <em><a href="#id480">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
</dd>
</dl>
</dd>
<dt><tt class="docutils literal">args</tt></dt>
<dd><p class="first">is a tuple of arbitrary positional arguments supplied via the
<a href="#id481"><span class="problematic" id="id482">:attr:`~Option.callback_args`</span></a> option attribute.</p>
<div class="last system-message" id="id481">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1663); <em><a href="#id482">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
</dd>
<dt><tt class="docutils literal">kwargs</tt></dt>
<dd><p class="first">is a dictionary of arbitrary keyword arguments supplied via
<a href="#id483"><span class="problematic" id="id484">:attr:`~Option.callback_kwargs`</span></a>.</p>
<div class="last system-message" id="id483">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1667); <em><a href="#id484">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
</dd>
</dl>
</div>
<div class="section" id="raising-errors-in-a-callback">
<span id="optparse-raising-errors-in-callback"></span><h2>Raising errors in a callback</h2>
<p>The callback function should raise <a href="#id485"><span class="problematic" id="id486">:exc:`OptionValueError`</span></a> if there are any
problems with the option or its argument(s).  <a href="#id487"><span class="problematic" id="id488">:mod:`optparse`</span></a> catches this and
terminates the program, printing the error message you supply to stderr.  Your
message should be clear, concise, accurate, and mention the option at fault.
Otherwise, the user will have a hard time figuring out what they did wrong.</p>
<div class="system-message" id="id485">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1676); <em><a href="#id486">backlink</a></em></p>
Unknown interpreted text role &quot;exc&quot;.</div>
<div class="system-message" id="id487">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1676); <em><a href="#id488">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
</div>
<div class="section" id="callback-example-1-trivial-callback">
<span id="optparse-callback-example-1"></span><h2>Callback example 1: trivial callback</h2>
<p>Here's an example of a callback option that takes no arguments, and simply
records that the option was seen:</p>
<pre class="literal-block">
def record_foo_seen(option, opt_str, value, parser):
    parser.values.saw_foo = True

parser.add_option(&quot;--foo&quot;, action=&quot;callback&quot;, callback=record_foo_seen)
</pre>
<p>Of course, you could do that with the <tt class="docutils literal">&quot;store_true&quot;</tt> action.</p>
</div>
<div class="section" id="callback-example-2-check-option-order">
<span id="optparse-callback-example-2"></span><h2>Callback example 2: check option order</h2>
<p>Here's a slightly more interesting example: record the fact that <tt class="docutils literal"><span class="pre">-a</span></tt> is
seen, but blow up if it comes after <tt class="docutils literal"><span class="pre">-b</span></tt> in the command-line.</p>
<pre class="literal-block">
def check_order(option, opt_str, value, parser):
    if parser.values.b:
        raise OptionValueError(&quot;can't use -a after -b&quot;)
    parser.values.a = 1
...
parser.add_option(&quot;-a&quot;, action=&quot;callback&quot;, callback=check_order)
parser.add_option(&quot;-b&quot;, action=&quot;store_true&quot;, dest=&quot;b&quot;)
</pre>
</div>
<div class="section" id="callback-example-3-check-option-order-generalized">
<span id="optparse-callback-example-3"></span><h2>Callback example 3: check option order (generalized)</h2>
<p>If you want to re-use this callback for several similar options (set a flag, but
blow up if <tt class="docutils literal"><span class="pre">-b</span></tt> has already been seen), it needs a bit of work: the error
message and the flag that it sets must be generalized.</p>
<pre class="literal-block">
def check_order(option, opt_str, value, parser):
    if parser.values.b:
        raise OptionValueError(&quot;can't use %s after -b&quot; % opt_str)
    setattr(parser.values, option.dest, 1)
...
parser.add_option(&quot;-a&quot;, action=&quot;callback&quot;, callback=check_order, dest='a')
parser.add_option(&quot;-b&quot;, action=&quot;store_true&quot;, dest=&quot;b&quot;)
parser.add_option(&quot;-c&quot;, action=&quot;callback&quot;, callback=check_order, dest='c')
</pre>
</div>
<div class="section" id="callback-example-4-check-arbitrary-condition">
<span id="optparse-callback-example-4"></span><h2>Callback example 4: check arbitrary condition</h2>
<p>Of course, you could put any condition in there---you're not limited to checking
the values of already-defined options.  For example, if you have options that
should not be called when the moon is full, all you have to do is this:</p>
<pre class="literal-block">
def check_moon(option, opt_str, value, parser):
    if is_moon_full():
        raise OptionValueError(&quot;%s option invalid when moon is full&quot;
                               % opt_str)
    setattr(parser.values, option.dest, 1)
...
parser.add_option(&quot;--foo&quot;,
                  action=&quot;callback&quot;, callback=check_moon, dest=&quot;foo&quot;)
</pre>
<p>(The definition of <tt class="docutils literal">is_moon_full()</tt> is left as an exercise for the reader.)</p>
</div>
<div class="section" id="callback-example-5-fixed-arguments">
<span id="optparse-callback-example-5"></span><h2>Callback example 5: fixed arguments</h2>
<p>Things get slightly more interesting when you define callback options that take
a fixed number of arguments.  Specifying that a callback option takes arguments
is similar to defining a <tt class="docutils literal">&quot;store&quot;</tt> or <tt class="docutils literal">&quot;append&quot;</tt> option: if you define
<a href="#id489"><span class="problematic" id="id490">:attr:`~Option.type`</span></a>, then the option takes one argument that must be
convertible to that type; if you further define <a href="#id491"><span class="problematic" id="id492">:attr:`~Option.nargs`</span></a>, then the
option takes <a href="#id493"><span class="problematic" id="id494">:attr:`~Option.nargs`</span></a> arguments.</p>
<div class="system-message" id="id489">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1761); <em><a href="#id490">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<div class="system-message" id="id491">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1761); <em><a href="#id492">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<div class="system-message" id="id493">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1761); <em><a href="#id494">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<p>Here's an example that just emulates the standard <tt class="docutils literal">&quot;store&quot;</tt> action:</p>
<pre class="literal-block">
def store_value(option, opt_str, value, parser):
    setattr(parser.values, option.dest, value)
...
parser.add_option(&quot;--foo&quot;,
                  action=&quot;callback&quot;, callback=store_value,
                  type=&quot;int&quot;, nargs=3, dest=&quot;foo&quot;)
</pre>
<p>Note that <a href="#id495"><span class="problematic" id="id496">:mod:`optparse`</span></a> takes care of consuming 3 arguments and converting
them to integers for you; all you have to do is store them.  (Or whatever;
obviously you don't need a callback for this example.)</p>
<div class="system-message" id="id495">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1777); <em><a href="#id496">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
</div>
<div class="section" id="callback-example-6-variable-arguments">
<span id="optparse-callback-example-6"></span><h2>Callback example 6: variable arguments</h2>
<p>Things get hairy when you want an option to take a variable number of arguments.
For this case, you must write a callback, as <a href="#id497"><span class="problematic" id="id498">:mod:`optparse`</span></a> doesn't provide any
built-in capabilities for it.  And you have to deal with certain intricacies of
conventional Unix command-line parsing that <a href="#id499"><span class="problematic" id="id500">:mod:`optparse`</span></a> normally handles for
you.  In particular, callbacks should implement the conventional rules for bare
<tt class="docutils literal"><span class="pre">--</span></tt> and <tt class="docutils literal">-</tt> arguments:</p>
<div class="system-message" id="id497">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1787); <em><a href="#id498">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id499">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1787); <em><a href="#id500">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<ul class="simple">
<li>either <tt class="docutils literal"><span class="pre">--</span></tt> or <tt class="docutils literal">-</tt> can be option arguments</li>
<li>bare <tt class="docutils literal"><span class="pre">--</span></tt> (if not the argument to some option): halt command-line
processing and discard the <tt class="docutils literal"><span class="pre">--</span></tt></li>
<li>bare <tt class="docutils literal">-</tt> (if not the argument to some option): halt command-line
processing but keep the <tt class="docutils literal">-</tt> (append it to <tt class="docutils literal">parser.largs</tt>)</li>
</ul>
<p>If you want an option that takes a variable number of arguments, there are
several subtle, tricky issues to worry about.  The exact implementation you
choose will be based on which trade-offs you're willing to make for your
application (which is why <a href="#id501"><span class="problematic" id="id502">:mod:`optparse`</span></a> doesn't support this sort of thing
directly).</p>
<div class="system-message" id="id501">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1802); <em><a href="#id502">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<p>Nevertheless, here's a stab at a callback for an option with variable
arguments:</p>
<pre class="literal-block">
def vararg_callback(option, opt_str, value, parser):
    assert value is None
    value = []

    def floatable(str):
        try:
            float(str)
            return True
        except ValueError:
            return False

    for arg in parser.rargs:
        # stop on --foo like options
        if arg[:2] == &quot;--&quot; and len(arg) &gt; 2:
            break
        # stop on -a, but not on -3 or -3.0
        if arg[:1] == &quot;-&quot; and len(arg) &gt; 1 and not floatable(arg):
            break
        value.append(arg)

    del parser.rargs[:len(value)]
    setattr(parser.values, option.dest, value)

...
parser.add_option(&quot;-c&quot;, &quot;--callback&quot;, dest=&quot;vararg_attr&quot;,
                  action=&quot;callback&quot;, callback=vararg_callback)
</pre>
</div>
</div>
<div class="section" id="extending-mod-optparse">
<span id="optparse-extending-optparse"></span><h1>Extending <a href="#id503"><span class="problematic" id="id504">:mod:`optparse`</span></a></h1>
<div class="system-message" id="id503">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1841); <em><a href="#id504">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<p>Since the two major controlling factors in how <a href="#id505"><span class="problematic" id="id506">:mod:`optparse`</span></a> interprets
command-line options are the action and type of each option, the most likely
direction of extension is to add new actions and new types.</p>
<div class="system-message" id="id505">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1844); <em><a href="#id506">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="section" id="adding-new-types">
<span id="optparse-adding-new-types"></span><h2>Adding new types</h2>
<p>To add new types, you need to define your own subclass of <a href="#id507"><span class="problematic" id="id508">:mod:`optparse`</span></a>'s
<a href="#id509"><span class="problematic" id="id510">:class:`Option`</span></a> class.  This class has a couple of attributes that define
<a href="#id511"><span class="problematic" id="id512">:mod:`optparse`</span></a>'s types: <a href="#id513"><span class="problematic" id="id514">:attr:`~Option.TYPES`</span></a> and <a href="#id515"><span class="problematic" id="id516">:attr:`~Option.TYPE_CHECKER`</span></a>.</p>
<div class="system-message" id="id507">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1854); <em><a href="#id508">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id509">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1854); <em><a href="#id510">backlink</a></em></p>
Unknown interpreted text role &quot;class&quot;.</div>
<div class="system-message" id="id511">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1854); <em><a href="#id512">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="system-message" id="id513">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1854); <em><a href="#id514">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<div class="system-message" id="id515">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1854); <em><a href="#id516">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1858)</p>
<p>Unknown directive type &quot;attribute&quot;.</p>
<pre class="literal-block">
.. attribute:: Option.TYPES

   A tuple of type names; in your subclass, simply define a new tuple
   :attr:`TYPES` that builds on the standard one.

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1863)</p>
<p>Unknown directive type &quot;attribute&quot;.</p>
<pre class="literal-block">
.. attribute:: Option.TYPE_CHECKER

   A dictionary mapping type names to type-checking functions.  A type-checking
   function has the following signature::

      def check_mytype(option, opt, value)

   where ``option`` is an :class:`Option` instance, ``opt`` is an option string
   (e.g., ``-f``), and ``value`` is the string from the command line that must
   be checked and converted to your desired type.  ``check_mytype()`` should
   return an object of the hypothetical type ``mytype``.  The value returned by
   a type-checking function will wind up in the OptionValues instance returned
   by :meth:`OptionParser.parse_args`, or be passed to a callback as the
   ``value`` parameter.

   Your type-checking function should raise :exc:`OptionValueError` if it
   encounters any problems.  :exc:`OptionValueError` takes a single string
   argument, which is passed as-is to :class:`OptionParser`'s :meth:`error`
   method, which in turn prepends the program name and the string ``&quot;error:&quot;``
   and prints everything to stderr before terminating the process.

</pre>
</div>
<p>Here's a silly example that demonstrates adding a <tt class="docutils literal">&quot;complex&quot;</tt> option type to
parse Python-style complex numbers on the command line.  (This is even sillier
than it used to be, because <a href="#id517"><span class="problematic" id="id518">:mod:`optparse`</span></a> 1.3 added built-in support for
complex numbers, but never mind.)</p>
<div class="system-message" id="id517">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1884); <em><a href="#id518">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<p>First, the necessary imports:</p>
<pre class="literal-block">
from copy import copy
from optparse import Option, OptionValueError
</pre>
<p>You need to define your type-checker first, since it's referred to later (in the
<a href="#id519"><span class="problematic" id="id520">:attr:`~Option.TYPE_CHECKER`</span></a> class attribute of your Option subclass):</p>
<div class="system-message" id="id519">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1894); <em><a href="#id520">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<pre class="literal-block">
def check_complex(option, opt, value):
    try:
        return complex(value)
    except ValueError:
        raise OptionValueError(
            &quot;option %s: invalid complex value: %r&quot; % (opt, value))
</pre>
<p>Finally, the Option subclass:</p>
<pre class="literal-block">
class MyOption (Option):
    TYPES = Option.TYPES + (&quot;complex&quot;,)
    TYPE_CHECKER = copy(Option.TYPE_CHECKER)
    TYPE_CHECKER[&quot;complex&quot;] = check_complex
</pre>
<p>(If we didn't make a <a href="#id521"><span class="problematic" id="id522">:func:`copy`</span></a> of <a href="#id523"><span class="problematic" id="id524">:attr:`Option.TYPE_CHECKER`</span></a>, we would end
up modifying the <a href="#id525"><span class="problematic" id="id526">:attr:`~Option.TYPE_CHECKER`</span></a> attribute of <a href="#id527"><span class="problematic" id="id528">:mod:`optparse`</span></a>'s
Option class.  This being Python, nothing stops you from doing that except good
manners and common sense.)</p>
<div class="system-message" id="id521">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1911); <em><a href="#id522">backlink</a></em></p>
Unknown interpreted text role &quot;func&quot;.</div>
<div class="system-message" id="id523">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1911); <em><a href="#id524">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<div class="system-message" id="id525">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1911); <em><a href="#id526">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
<div class="system-message" id="id527">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1911); <em><a href="#id528">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<p>That's it!  Now you can write a script that uses the new option type just like
any other <a href="#id529"><span class="problematic" id="id530">:mod:`optparse`</span></a>-based script, except you have to instruct your
OptionParser to use MyOption instead of Option:</p>
<div class="system-message" id="id529">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1916); <em><a href="#id530">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<pre class="literal-block">
parser = OptionParser(option_class=MyOption)
parser.add_option(&quot;-c&quot;, type=&quot;complex&quot;)
</pre>
<p>Alternately, you can build your own option list and pass it to OptionParser; if
you don't use <a href="#id531"><span class="problematic" id="id532">:meth:`add_option`</span></a> in the above way, you don't need to tell
OptionParser which option class to use:</p>
<div class="system-message" id="id531">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1923); <em><a href="#id532">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<pre class="literal-block">
option_list = [MyOption(&quot;-c&quot;, action=&quot;store&quot;, type=&quot;complex&quot;, dest=&quot;c&quot;)]
parser = OptionParser(option_list=option_list)
</pre>
</div>
<div class="section" id="adding-new-actions">
<span id="optparse-adding-new-actions"></span><h2>Adding new actions</h2>
<p>Adding new actions is a bit trickier, because you have to understand that
<a href="#id533"><span class="problematic" id="id534">:mod:`optparse`</span></a> has a couple of classifications for actions:</p>
<div class="system-message" id="id533">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1936); <em><a href="#id534">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<dl class="docutils">
<dt>&quot;store&quot; actions</dt>
<dd><p class="first">actions that result in <a href="#id535"><span class="problematic" id="id536">:mod:`optparse`</span></a> storing a value to an attribute of the
current OptionValues instance; these options require a <a href="#id537"><span class="problematic" id="id538">:attr:`~Option.dest`</span></a>
attribute to be supplied to the Option constructor.</p>
<div class="system-message" id="id535">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1940); <em><a href="#id536">backlink</a></em></p>
Unknown interpreted text role &quot;mod&quot;.</div>
<div class="last system-message" id="id537">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1940); <em><a href="#id538">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
</dd>
<dt>&quot;typed&quot; actions</dt>
<dd><p class="first">actions that take a value from the command line and expect it to be of a
certain type; or rather, a string that can be converted to a certain type.
These options require a <a href="#id539"><span class="problematic" id="id540">:attr:`~Option.type`</span></a> attribute to the Option
constructor.</p>
<div class="last system-message" id="id539">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1945); <em><a href="#id540">backlink</a></em></p>
Unknown interpreted text role &quot;attr&quot;.</div>
</dd>
</dl>
<p>These are overlapping sets: some default &quot;store&quot; actions are <tt class="docutils literal">&quot;store&quot;</tt>,
<tt class="docutils literal">&quot;store_const&quot;</tt>, <tt class="docutils literal">&quot;append&quot;</tt>, and <tt class="docutils literal">&quot;count&quot;</tt>, while the default &quot;typed&quot;
actions are <tt class="docutils literal">&quot;store&quot;</tt>, <tt class="docutils literal">&quot;append&quot;</tt>, and <tt class="docutils literal">&quot;callback&quot;</tt>.</p>
<p>When you add an action, you need to categorize it by listing it in at least one
of the following class attributes of Option (all are lists of strings):</p>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1957)</p>
<p>Unknown directive type &quot;attribute&quot;.</p>
<pre class="literal-block">
.. attribute:: Option.ACTIONS

   All actions must be listed in ACTIONS.

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1961)</p>
<p>Unknown directive type &quot;attribute&quot;.</p>
<pre class="literal-block">
.. attribute:: Option.STORE_ACTIONS

   &quot;store&quot; actions are additionally listed here.

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1965)</p>
<p>Unknown directive type &quot;attribute&quot;.</p>
<pre class="literal-block">
.. attribute:: Option.TYPED_ACTIONS

   &quot;typed&quot; actions are additionally listed here.

</pre>
</div>
<div class="system-message">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1969)</p>
<p>Unknown directive type &quot;attribute&quot;.</p>
<pre class="literal-block">
.. attribute:: Option.ALWAYS_TYPED_ACTIONS

   Actions that always take a type (i.e. whose options always take a value) are
   additionally listed here.  The only effect of this is that :mod:`optparse`
   assigns the default type, ``&quot;string&quot;``, to options with no explicit type
   whose action is listed in :attr:`ALWAYS_TYPED_ACTIONS`.

</pre>
</div>
<p>In order to actually implement your new action, you must override Option's
<a href="#id541"><span class="problematic" id="id542">:meth:`take_action`</span></a> method and add a case that recognizes your action.</p>
<div class="system-message" id="id541">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 1976); <em><a href="#id542">backlink</a></em></p>
Unknown interpreted text role &quot;meth&quot;.</div>
<p>For example, let's add an <tt class="docutils literal">&quot;extend&quot;</tt> action.  This is similar to the standard
<tt class="docutils literal">&quot;append&quot;</tt> action, but instead of taking a single value from the command-line
and appending it to an existing list, <tt class="docutils literal">&quot;extend&quot;</tt> will take multiple values in
a single comma-delimited string, and extend an existing list with them.  That
is, if <tt class="docutils literal"><span class="pre">--names</span></tt> is an <tt class="docutils literal">&quot;extend&quot;</tt> option of type <tt class="docutils literal">&quot;string&quot;</tt>, the command
line</p>
<pre class="literal-block">
--names=foo,bar --names blah --names ding,dong
</pre>
<p>would result in a list</p>
<pre class="literal-block">
[&quot;foo&quot;, &quot;bar&quot;, &quot;blah&quot;, &quot;ding&quot;, &quot;dong&quot;]
</pre>
<p>Again we define a subclass of Option:</p>
<pre class="literal-block">
class MyOption(Option):

    ACTIONS = Option.ACTIONS + (&quot;extend&quot;,)
    STORE_ACTIONS = Option.STORE_ACTIONS + (&quot;extend&quot;,)
    TYPED_ACTIONS = Option.TYPED_ACTIONS + (&quot;extend&quot;,)
    ALWAYS_TYPED_ACTIONS = Option.ALWAYS_TYPED_ACTIONS + (&quot;extend&quot;,)

    def take_action(self, action, dest, opt, value, values, parser):
        if action == &quot;extend&quot;:
            lvalue = value.split(&quot;,&quot;)
            values.ensure_value(dest, []).extend(lvalue)
        else:
            Option.take_action(
                self, action, dest, opt, value, values, parser)
</pre>
<p>Features of note:</p>
<ul>
<li><p class="first"><tt class="docutils literal">&quot;extend&quot;</tt> both expects a value on the command-line and stores that value
somewhere, so it goes in both <a href="#id543"><span class="problematic" id="id544">:attr:`~Option.STORE_ACTIONS`</span></a> and
<a href="#id545"><span class="problematic" id="id546">:attr:`~Option.TYPED_ACTIONS`</span></a>.</p>
<div class="system-message" id="id543">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 2011); <em><a href="#id544">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
<div class="system-message" id="id545">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 2011); <em><a href="#id546">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
</li>
<li><p class="first">to ensure that <a href="#id547"><span class="problematic" id="id548">:mod:`optparse`</span></a> assigns the default type of <tt class="docutils literal">&quot;string&quot;</tt> to
<tt class="docutils literal">&quot;extend&quot;</tt> actions, we put the <tt class="docutils literal">&quot;extend&quot;</tt> action in
<a href="#id549"><span class="problematic" id="id550">:attr:`~Option.ALWAYS_TYPED_ACTIONS`</span></a> as well.</p>
<div class="system-message" id="id547">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 2015); <em><a href="#id548">backlink</a></em></p>
<p>Unknown interpreted text role &quot;mod&quot;.</p>
</div>
<div class="system-message" id="id549">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 2015); <em><a href="#id550">backlink</a></em></p>
<p>Unknown interpreted text role &quot;attr&quot;.</p>
</div>
</li>
<li><p class="first"><a href="#id551"><span class="problematic" id="id552">:meth:`MyOption.take_action`</span></a> implements just this one new action, and passes
control back to <a href="#id553"><span class="problematic" id="id554">:meth:`Option.take_action`</span></a> for the standard <a href="#id555"><span class="problematic" id="id556">:mod:`optparse`</span></a>
actions.</p>
<div class="system-message" id="id551">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 2019); <em><a href="#id552">backlink</a></em></p>
<p>Unknown interpreted text role &quot;meth&quot;.</p>
</div>
<div class="system-message" id="id553">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 2019); <em><a href="#id554">backlink</a></em></p>
<p>Unknown interpreted text role &quot;meth&quot;.</p>
</div>
<div class="system-message" id="id555">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 2019); <em><a href="#id556">backlink</a></em></p>
<p>Unknown interpreted text role &quot;mod&quot;.</p>
</div>
</li>
<li><p class="first"><tt class="docutils literal">values</tt> is an instance of the optparse_parser.Values class, which provides
the very useful <a href="#id557"><span class="problematic" id="id558">:meth:`ensure_value`</span></a> method. <a href="#id559"><span class="problematic" id="id560">:meth:`ensure_value`</span></a> is
essentially <a href="#id561"><span class="problematic" id="id562">:func:`getattr`</span></a> with a safety valve; it is called as</p>
<div class="system-message" id="id557">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 2023); <em><a href="#id558">backlink</a></em></p>
<p>Unknown interpreted text role &quot;meth&quot;.</p>
</div>
<div class="system-message" id="id559">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 2023); <em><a href="#id560">backlink</a></em></p>
<p>Unknown interpreted text role &quot;meth&quot;.</p>
</div>
<div class="system-message" id="id561">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 2023); <em><a href="#id562">backlink</a></em></p>
<p>Unknown interpreted text role &quot;func&quot;.</p>
</div>
<pre class="literal-block">
values.ensure_value(attr, value)
</pre>
<p>If the <tt class="docutils literal">attr</tt> attribute of <tt class="docutils literal">values</tt> doesn't exist or is <tt class="docutils literal">None</tt>, then
ensure_value() first sets it to <tt class="docutils literal">value</tt>, and then returns 'value. This is
very handy for actions like <tt class="docutils literal">&quot;extend&quot;</tt>, <tt class="docutils literal">&quot;append&quot;</tt>, and <tt class="docutils literal">&quot;count&quot;</tt>, all
of which accumulate data in a variable and expect that variable to be of a
certain type (a list for the first two, an integer for the latter).  Using
<a href="#id563"><span class="problematic" id="id564">:meth:`ensure_value`</span></a> means that scripts using your action don't have to worry
about setting a default value for the option destinations in question; they
can just leave the default as <tt class="docutils literal">None</tt> and <a href="#id565"><span class="problematic" id="id566">:meth:`ensure_value`</span></a> will take care of
getting it right when it's needed.</p>
<div class="system-message" id="id563">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 2029); <em><a href="#id564">backlink</a></em></p>
<p>Unknown interpreted text role &quot;meth&quot;.</p>
</div>
<div class="system-message" id="id565">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">optparse.rst</tt>, line 2029); <em><a href="#id566">backlink</a></em></p>
<p>Unknown interpreted text role &quot;meth&quot;.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</body>
</html>
